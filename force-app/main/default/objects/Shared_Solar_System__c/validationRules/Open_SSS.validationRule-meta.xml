<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Open_SSS</fullName>
    <active>true</active>
    <errorConditionFormula>AND(
ISCHANGED(Open__c),
Open__c,
OR(
ISBLANK(Capacity_Available_to_be_Reserved__c),
Capacity_Available_to_be_Reserved__c = 0 ,
ISBLANK(Total_System_Size_kWh_DC__c),
Total_System_Size_kWh_DC__c = 0,
ISBLANK(Expected_Yield_kWh_kW__c),
Expected_Yield_kWh_kW__c = 0,
ISPICKVAL(Assignment_Order__c,&quot;&quot;),
ISBLANK(Product__c),
ISBLANK(Utility_NMC_Tariff__c),
ISBLANK(Utility__c),
ISBLANK(Service_Territories__c),


AND(ISPICKVAL(Product__r.Customer_Subscription_Type__c,&quot;kWh&quot;), OR(ISBLANK(Maximum_Subscription_Capacity_kWDC__c),
Maximum_Subscription_Capacity_kWDC__c= 0)),

AND(ISPICKVAL(Product__r.Customer_Subscription_Type__c, &quot;Electricity Cost ($)&quot;), 
OR(ISBLANK(Maximum_Subscription_Cost__c ),
Maximum_Subscription_Cost__c = 0)), 

/*Needs to have some sort of underwriting criteria set: None, FICO, or financial docs*/
AND( 

NOT(Do_Not_Underwrite__c),

OR(

NOT(Available_SMB_Underwriting_Method_FICO__c),
ISBLANK(Credit_Score_Requirement__c),
Credit_Score_Requirement__c = 0
),

NOT(Available_SMB_Underwriting_Method_Docs__c)
)
)
)</errorConditionFormula>
    <errorMessage>Can&apos;t set a SSS as Open without: 
System Size &amp; Yield; 
Capacity Available to Be Reserved &gt; 0; 
Product, Assignment Order &amp; NMC Tariff; 
Utility &amp; Service Territories; 
Maximum Subscription Cost &amp; kW &gt; 0; 
Credit Score Required; 
Underwriting</errorMessage>
</ValidationRule>
