<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Partner_lookup</fullName>
    <active>true</active>
    <description>We need to differentiate between opportunities acquired by BW and opportunities acquired elsewhere for client invoicing. This makes sure we always know the source of a lead</description>
    <errorConditionFormula>AND(
 ISBLANK(Partner_tag_lookup__c), 
 ISPICKVAL(StageName,&apos;Complete&apos;), 
 NOT(ISBLANK(Shared_Solar_System__c)) 
)</errorConditionFormula>
    <errorMessage>Partner must be populated for any opportunity linked to a Shared Solar System with Stage = Complete. The partner could be the client for customers acquired elsewhere, or BlueWave Inside Sales if we did not use a sales partner</errorMessage>
</ValidationRule>
