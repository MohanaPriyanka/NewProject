<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <actionCalls>
        <name>InvocableSubscriptionTransferer</name>
        <label>InvocableSubscriptionTransferer</label>
        <locationX>466</locationX>
        <locationY>1038</locationY>
        <actionName>InvocableSubscriptionTransferer</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Success_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Assign_Error_Log</targetReference>
        </faultConnector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>amount</name>
            <value>
                <elementReference>formula_AmountToTransfer</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>newUASId</name>
            <value>
                <elementReference>sov_UASTransferTo.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>oldUASId</name>
            <value>
                <elementReference>sovUAS.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Invoke_Sizing_Method_SOs</name>
        <label>Invoke Sizing Method SOs</label>
        <locationX>1855</locationX>
        <locationY>2012</locationY>
        <actionName>InvocableSizingMethodRecalculation</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Success_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Assign_Error_Log</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>soComments</name>
            <value>
                <elementReference>var_SOComments</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>uasListToUpdate</name>
            <value>
                <elementReference>socv_UAS</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>aassgnSet_New_Resize_Subscriptions</name>
        <label>Set New Resize Subscriptions</label>
        <locationX>1466</locationX>
        <locationY>953</locationY>
        <assignmentItems>
            <assignToReference>var_newAnnualCost</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>scrvarNew_Annual_Cost</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_newAnnualkWh</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>scrvarNew_Annual_kWh</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AssgnResizing_Variables_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_UAS_to_List</name>
        <label>Add UAS to List</label>
        <locationX>1855</locationX>
        <locationY>1122</locationY>
        <assignmentItems>
            <assignToReference>socv_UAS</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sovUAS</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Invoke_Sizing_Method_SOs</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assign inputs to sov for subscription orders.</description>
        <name>AssgnAdd_Resize_SO_to_List</name>
        <label>Add Resize SO to List</label>
        <locationX>1467</locationX>
        <locationY>1356</locationY>
        <assignmentItems>
            <assignToReference>socv_SO</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sov_SubscriptionOrder</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>scrSO_Review</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assgnAdd_UAS_and_SO_to_List</name>
        <label>Add UAS and SO to List</label>
        <locationX>1255</locationX>
        <locationY>1141</locationY>
        <assignmentItems>
            <assignToReference>socv_UAS</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sovUAS</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>socv_SO</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sov_SubscriptionOrder</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>scrSO_Review</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assgnCancellation_Variables_0_0</name>
        <label>Cancellation Variable Assigment</label>
        <locationX>1255</locationX>
        <locationY>991</locationY>
        <assignmentItems>
            <assignToReference>sovUAS.Next_Schedule_Z_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Inactive Subscription</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_SubscriptionOrder.Utility_Account_Subscription__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sovUAS.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_SubscriptionOrder.Comments__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_SOComments</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_SubscriptionOrder.Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>pcklst_Subscription_Order_Type</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_SubscriptionOrder.New_Annual_Cost__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_newAnnualCost</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_SubscriptionOrder.New_Annual_kWh__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_newAnnualkWh</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assgnAdd_UAS_and_SO_to_List</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssgnResizing_Variables_0</name>
        <label>Resizing Variables Assignment</label>
        <locationX>1467</locationX>
        <locationY>1103</locationY>
        <assignmentItems>
            <assignToReference>sov_SubscriptionOrder.Utility_Account_Subscription__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sovUAS.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_SubscriptionOrder.Comments__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_SOComments</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_SubscriptionOrder.Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>pcklst_Subscription_Order_Type</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_SubscriptionOrder.New_Annual_Cost__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_newAnnualCost</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_SubscriptionOrder.New_Annual_kWh__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_newAnnualkWh</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AssgnAdd_Resize_SO_to_List</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assgnSet_New_Cancellation_Subscription</name>
        <label>Set New Cancellation Subscription</label>
        <locationX>1255</locationX>
        <locationY>811</locationY>
        <assignmentItems>
            <assignToReference>var_newAnnualCost</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_newAnnualkWh</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assgnCancellation_Variables_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assgnSet_New_Transfer_Subscriptions</name>
        <label>Set New Transfer Subscriptions</label>
        <locationX>652</locationX>
        <locationY>799</locationY>
        <assignmentItems>
            <assignToReference>var_newAnnualCost</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_newAnnualkWh</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_TransferredNewAnnualCost</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>scrvar_transferredAnnual_Cost_Subscription_0</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_transferredNewAnnualkWh</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>scrvar_transferredkWh_Subscription_0</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>scrSO_Review_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Error_Log</name>
        <label>Assign Error Log</label>
        <locationX>458</locationX>
        <locationY>1945</locationY>
        <assignmentItems>
            <assignToReference>sov_ErrorLog.Severity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Error</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_ErrorLog.Timestamp__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_ErrorLog.User__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formula_RunningUserID</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_ErrorLog.Message__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>errormessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_ErrorLog.Class__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Flow</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sov_ErrorLog.Method__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>User Subscription Order Creation </stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Error_Log_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Error_Log_0</name>
        <label>Assign Error Log</label>
        <locationX>353</locationX>
        <locationY>1945</locationY>
        <assignmentItems>
            <assignToReference>socv_ErrorLog</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sov_ErrorLog</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Error_Log</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assigns the UAS as the Flow Record, so that it can be referenced in error logs.</description>
        <name>Assign_FlowRecord</name>
        <label>Assign_FlowRecord</label>
        <locationX>849</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>$Flow.CurrentRecord</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sovUAS.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SO_Input_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Sizing_Method</name>
        <label>Assign Sizing Method</label>
        <locationX>1850</locationX>
        <locationY>809</locationY>
        <assignmentItems>
            <assignToReference>sovUAS.Sizing_Method__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sovSizingMethod</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Sizing_Method</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Available_Capacity</name>
        <label>Set Available Capacity</label>
        <locationX>400</locationX>
        <locationY>269</locationY>
        <assignmentItems>
            <assignToReference>availableCapacity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sovUAS.Opportunity__r.Available_kW_DC__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>dec_MissingInfo</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>choice_AnnualUsage</name>
        <choiceText>Annual Usage (Cost or kWh)</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>AnnualUsage</stringValue>
        </value>
    </choices>
    <choices>
        <name>choice_SizingMethod</name>
        <choiceText>Sizing Method</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>SizingMethod</stringValue>
        </value>
    </choices>
    <decisions>
        <description>Checks to make sure the UAS has the information necessary for a UAS to be successfully created.</description>
        <name>dec_MissingInfo</name>
        <label>dec_MissingInfo</label>
        <locationX>670</locationX>
        <locationY>271</locationY>
        <defaultConnector>
            <targetReference>dec_MissingInfo_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Missing_Opportunity_or_SSS</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>sovUAS.Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sovUAS.Shared_Solar_System__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>scr_MissingInformation</targetReference>
            </connector>
            <label>Missing Opportunity or SSS</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checks to make sure the UAS has the information necessary for a UAS to be successfully created.</description>
        <name>dec_MissingInfo_0</name>
        <label>dec_MissingInfo</label>
        <locationX>842</locationX>
        <locationY>273</locationY>
        <defaultConnector>
            <targetReference>Assign_FlowRecord</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Missing_Sizing_Method_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sovUAS.Sizing_Method__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>scr_MissingSizingMethod</targetReference>
            </connector>
            <label>Missing Sizing Method</label>
        </rules>
    </decisions>
    <decisions>
        <name>dec_Type</name>
        <label>Type Decision</label>
        <locationX>1166</locationX>
        <locationY>568</locationY>
        <defaultConnector>
            <targetReference>scr_UnsupportedType</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Cancellation</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>pcklst_Subscription_Order_Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cancellation</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assgnSet_New_Cancellation_Subscription</targetReference>
            </connector>
            <label>Cancellation</label>
        </rules>
        <rules>
            <name>Initial</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>pcklst_Subscription_Order_Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Initial</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>scrResize_Inputs</targetReference>
            </connector>
            <label>Initial</label>
        </rules>
        <rules>
            <name>Transfer</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>pcklst_Subscription_Order_Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Transfer</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>scrTransfer_Inputs</targetReference>
            </connector>
            <label>Transfer</label>
        </rules>
        <rules>
            <name>Resize</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>pcklst_Subscription_Order_Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Resize</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>scrResize_Type</targetReference>
            </connector>
            <label>Resize</label>
        </rules>
    </decisions>
    <decisions>
        <name>dec_Type_0</name>
        <label>Type Decision</label>
        <locationX>1247</locationX>
        <locationY>1755</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Cancellation_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>pcklst_Subscription_Order_Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cancellation</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_UAS</targetReference>
            </connector>
            <label>Cancellation</label>
        </rules>
        <rules>
            <name>Resizing_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>pcklst_Subscription_Order_Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Resize</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Success_0</targetReference>
            </connector>
            <label>Resizing</label>
        </rules>
        <rules>
            <name>Transfer_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>pcklst_Subscription_Order_Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Transfer</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_UAS</targetReference>
            </connector>
            <label>Transfer</label>
        </rules>
    </decisions>
    <decisions>
        <name>Resize_Type_Decision</name>
        <label>Resize Type Decision</label>
        <locationX>1627</locationX>
        <locationY>662</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Annual_Usage</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Select_Resize_Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AnnualUsage</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>scrResize_Inputs</targetReference>
            </connector>
            <label>Annual Usage</label>
        </rules>
        <rules>
            <name>Sizing_Method</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Select_Resize_Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SizingMethod</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>scrSizing_Method_Lookup</targetReference>
            </connector>
            <label>Sizing Method</label>
        </rules>
    </decisions>
    <description>Flow that is launched from UASs that allows a user to input an annual cost or kwh value, and have a subscription order created.</description>
    <dynamicChoiceSets>
        <name>pcs_SO_Type_Picklist</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Type__c</picklistField>
        <picklistObject>Subscription_Order__c</picklistObject>
    </dynamicChoiceSets>
    <formulas>
        <description>Either kWh or Cost, depending on Subscription Type</description>
        <name>formula_AmountToTransfer</name>
        <dataType>Number</dataType>
        <expression>CASE(
{!sov_UASTransferTo.Subscription_Type__c},
&apos;kWh&apos;, {!var_transferredNewAnnualkWh},
&apos;Electricity Cost ($)&apos;, {!var_TransferredNewAnnualCost},
null
)</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>formula_MissingSizingMethod</name>
        <dataType>Boolean</dataType>
        <expression>ISBLANK({!sovUAS.Sizing_Method__c})</expression>
    </formulas>
    <formulas>
        <name>formula_MissingSSS</name>
        <dataType>Boolean</dataType>
        <expression>ISBLANK({!sovUAS.Shared_Solar_System__c})</expression>
    </formulas>
    <formulas>
        <name>formula_NullOpportunity</name>
        <dataType>Boolean</dataType>
        <expression>ISBLANK({!sovUAS.Opportunity__c})</expression>
    </formulas>
    <formulas>
        <name>formula_RunningUserID</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>formula_TextnewAnnualSubscription</name>
        <dataType>String</dataType>
        <expression>CASE(
{!sovUAS.Subscription_Type__c},
&apos;kWh&apos;,
TEXT({!var_newAnnualkWh}),
&apos;Electricity Cost ($)&apos;,
TEXT({!var_newAnnualCost}),
&apos;null&apos;
)</expression>
    </formulas>
    <formulas>
        <name>formula_TextTransferredToNewSubscription</name>
        <dataType>String</dataType>
        <expression>CASE(
{!sov_UASTransferTo.Subscription_Type__c},
&apos;kWh&apos;,
TEXT({!var_transferredNewAnnualkWh})&amp;&apos; kWh&apos;,
&apos;Electricity Cost ($)&apos;,
&apos;$&apos;&amp;TEXT({!var_TransferredNewAnnualCost}),
&apos;null&apos;
)</expression>
    </formulas>
    <formulas>
        <description>New Usage - Old Usage</description>
        <name>formulaChangeInUsage</name>
        <dataType>Number</dataType>
        <expression>IF(CONTAINS({!sovUAS.Subscription_Type__c}, &quot;kWh&quot;),
{!scrvarNew_Annual_kWh} - {!sovUAS.Annual_kWh_Subscription_Future_Rollup__c}, 
{!scrvarNew_Annual_Cost} - {!sovUAS.Annual_Cost_Future_Rollup__c})</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>formulaMaximumUsage</name>
        <dataType>Number</dataType>
        <expression>IF(CONTAINS({!sovUAS.Subscription_Type__c}, &quot;kWh&quot;), 
/* kWh Calculation */
 {!sovUAS.Annual_kWh_Subscription_Future_Rollup__c} + ROUND( ({!availableCapacity}*{!sovUAS.Shared_Solar_System__r.Expected_Yield_kWh_kW__c})/{!sovUAS.Sizing_Method__r.Size_Ratio__c},4), 
/* Cost Calculation */
{!sovUAS.Annual_Cost_Future_Rollup__c} + ROUND( {!availableCapacity}* {!sovUAS.Shared_Solar_System__r.Expected_Yield_kWh_kW__c} *  {!sovUAS.Sizing_Method__r.Value_of_NMC__c},4))</expression>
        <scale>2</scale>
    </formulas>
    <interviewLabel>User Subscription Order Creation {!$Flow.CurrentDateTime}</interviewLabel>
    <label>User Subscription Order Creation</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>SO_Creation</name>
        <label>SO Creation</label>
        <locationX>1255</locationX>
        <locationY>1595</locationY>
        <connector>
            <targetReference>dec_Type_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Assign_Error_Log</targetReference>
        </faultConnector>
        <inputReference>socv_SO</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Transferred_To_UAS</name>
        <label>Get Transferred To UAS</label>
        <locationX>992</locationX>
        <locationY>799</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>scrTransfer_Inputs_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>sov_SOTransferTo.Utility_Account_Subscription__c</elementReference>
            </value>
        </filters>
        <object>Utility_Account_Subscription__c</object>
        <outputReference>sov_UASTransferTo</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Annual_kWh_Subscription_Future_Rollup__c</queriedFields>
        <queriedFields>Annual_Cost_Future_Rollup__c</queriedFields>
        <queriedFields>Transferred_To__c</queriedFields>
        <queriedFields>Transferred_From__c</queriedFields>
        <queriedFields>Subscription_Type__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_UAS</name>
        <label>Get_UAS</label>
        <locationX>400</locationX>
        <locationY>571</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Set_Available_Capacity</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_UASID</elementReference>
            </value>
        </filters>
        <object>Utility_Account_Subscription__c</object>
        <outputReference>sovUAS</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Subscription_Type__c</queriedFields>
        <queriedFields>Annual_Cost_Future_Rollup__c</queriedFields>
        <queriedFields>Annual_kWh_Subscription_Future_Rollup__c</queriedFields>
        <queriedFields>Transferred_From__c</queriedFields>
        <queriedFields>Transferred_To__c</queriedFields>
        <queriedFields>Future_Customer_Subscription_KWDC_Rollup__c</queriedFields>
        <queriedFields>Sizing_Method__c</queriedFields>
        <queriedFields>Opportunity__c</queriedFields>
        <queriedFields>Shared_Solar_System__c</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>Update_Sizing_Method</name>
        <label>Update Sizing Method</label>
        <locationX>1849</locationX>
        <locationY>974</locationY>
        <connector>
            <targetReference>Add_UAS_to_List</targetReference>
        </connector>
        <inputReference>sovUAS</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_UAS</name>
        <label>Update UAS</label>
        <locationX>908</locationX>
        <locationY>1752</locationY>
        <connector>
            <targetReference>Success_0</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Assign_Error_Log</targetReference>
        </faultConnector>
        <inputReference>socv_UAS</inputReference>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <name>Error</name>
        <label>Error</label>
        <locationX>136</locationX>
        <locationY>1945</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>txt_Error</name>
            <fieldText>&lt;p&gt;The Subscription Order was not able to be created because this error occurred:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); font-family: courier;&quot;&gt;{!$Flow.FaultMessage}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Business Application has been notified.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;The most common reason for this happening is not having permission to create Subscription Orders. If this is the case, please submit a case to productsupport@bluewavesolar.com to have those permissions assigned to you.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>scr_MissingInformation</name>
        <label>scr_MissingInformation</label>
        <locationX>677</locationX>
        <locationY>51</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>txt_MissingInfo</name>
            <fieldText>&lt;p&gt;The UAS you are trying to resize is missing some required information. See below:&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>txt_Opportunity</name>
            <fieldText>&lt;ul&gt;&lt;li&gt;The Opportunity lookup on the UAS is blank. Please exit this screen, populate it with the correct opportunity and then restart the Subscription Order flow.&lt;/li&gt;&lt;/ul&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>formula_NullOpportunity</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <booleanValue>true</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>txt_SSS</name>
            <fieldText>&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;The  Shared Solar System lookup on the UAS is blank. Please exit this screen, populate it with the correct Shared Solar System and then restart the Subscription Order flow.&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>formula_MissingSSS</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <booleanValue>true</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>scr_MissingSizingMethod</name>
        <label>scr_MissingSizingMethod</label>
        <locationX>1854</locationX>
        <locationY>269</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>scrSizing_Method_Lookup</targetReference>
        </connector>
        <fields>
            <name>txt_MissingSizingRatio</name>
            <fieldText>&lt;p&gt;This UAS is missing a Sizing Method, which is required in order to create a new Subscription Order. By clicking Next, you will be able to assign a Sizing Method. You will not be able to log a Subscription Order until a Sizing Method has been chosen.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>scr_UnsupportedType</name>
        <label>Unsupported Type</label>
        <locationX>1180</locationX>
        <locationY>356</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>txt_Unsupported</name>
            <fieldText>&lt;p&gt;The type of subscription order you selected cannot be logged using this screen. If you&apos;re trying to log a System Change subscription order, please go to the related Shared Solar System and log a Shared Solar System Order.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Click the Previous button to choose a different Type, or Finish to exit this screen.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>scrResize_Inputs</name>
        <label>Resize Inputs</label>
        <locationX>1467</locationX>
        <locationY>777</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>aassgnSet_New_Resize_Subscriptions</targetReference>
        </connector>
        <fields>
            <name>txtAnnual_Cost_Sizing</name>
            <fieldText>&lt;p&gt;Enter the new Annual Cost ($) that you would like this subscription to have. For example, if the current Annual Cost is $1,000, and they are being resized to $800, enter $800.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;For reference:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;UAS&apos;s Current Annual Cost: &lt;/b&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;{!sovUAS.Annual_Cost_Future_Rollup__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;UAS&apos;s Maximum Annual Cost: &lt;/b&gt;{!formulaMaximumUsage}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Note: Maximum Annual Cost is based on the Opportunity&apos;s Available Capacity - so as not to exceed Subscription maximums. Maximums do not apply to Anchors. &lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>sovUAS.Subscription_Type__c</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Electricity Cost ($)</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>scrvarNew_Annual_Cost</name>
            <dataType>Currency</dataType>
            <fieldText>New Annual Cost ($)</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <scale>6</scale>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>sovUAS.Subscription_Type__c</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Electricity Cost ($)</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>txt_AnnualkWh_Sizing</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255);&quot;&gt;Enter the new Annual kWh that you would like this subscription to have. For example, if the current Annual kWh is 1,000, and they are being resized to 800, enter 800.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;For reference:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;UAS&apos;s Current Annual kWh: &lt;/b&gt;&lt;span style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255);&quot;&gt;{!sovUAS.Annual_kWh_Subscription_Future_Rollup__c}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;UAS&apos;s Maximum Annual kWh: &lt;/b&gt;&lt;span style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255);&quot;&gt;{!formulaMaximumUsage}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Note: Maximum Annual kWh is based on the Opportunity&apos;s Available Capacity - so as not to exceed Subscription maximums. Maximums do not apply to Anchors&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>sovUAS.Subscription_Type__c</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>kWh</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>scrvarNew_Annual_kWh</name>
            <dataType>Number</dataType>
            <fieldText>New Annual kWh</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <scale>2</scale>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>sovUAS.Subscription_Type__c</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>kWh</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>scrResize_Type</name>
        <label>scrResize_Type</label>
        <locationX>1460</locationX>
        <locationY>567</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Resize_Type_Decision</targetReference>
        </connector>
        <fields>
            <name>ResizeTypetext</name>
            <fieldText>&lt;p&gt;Utility Account Subscriptions can be resized by changing the Sizing Method or the Annual Usage. Subscription Orders will be created to reflect the change in the calculations. &lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Please select how you want to resize the current subscription.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Select_Resize_Type</name>
            <choiceReferences>choice_AnnualUsage</choiceReferences>
            <choiceReferences>choice_SizingMethod</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Select One</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>scrSizing_Method_Lookup</name>
        <label>Sizing Method Lookup</label>
        <locationX>1854</locationX>
        <locationY>654</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Assign_Sizing_Method</targetReference>
        </connector>
        <fields>
            <name>LookupSizingMethodtxt</name>
            <fieldText>&lt;p&gt;The UAS is currently assigned the Sizing Method of &lt;b&gt;{!sovUAS.Sizing_Method__r.Name} &lt;/b&gt;with a Sizing Ratio of &lt;b&gt;{!sovUAS.Sizing_Method__r.Size_Ratio__c}. &lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Please select the new Sizing Method for the UAS. &lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Lookup_SizingMethod</name>
            <extensionName>flowruntime:lookup</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>fieldApiName</name>
                <value>
                    <stringValue>Sizing_Method__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Select Sizing Method:</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objectApiName</name>
                <value>
                    <stringValue>Utility_Account_Subscription__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>required</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>sovSizingMethod</assignToReference>
                <name>recordId</name>
            </outputParameters>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>scrSO_Review</name>
        <label>SO Review</label>
        <locationX>1255</locationX>
        <locationY>1355</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>SO_Creation</targetReference>
        </connector>
        <fields>
            <name>txtExceedMaximumWarning</name>
            <fieldText>&lt;p&gt;&lt;b style=&quot;color: rgb(240, 0, 0);&quot;&gt;WARNING: &lt;/b&gt;&lt;span style=&quot;color: rgb(240, 0, 0);&quot;&gt;Based on the inputs given, the related Opportunity will exceed its Maximum kW DC Subscription of {!sovUAS.Opportunity__r.Maximum_kW_Subscription__c}.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>((1 AND 2) OR (3 AND 4)) AND 5</conditionLogic>
                <conditions>
                    <leftValueReference>scrvarNew_Annual_Cost</leftValueReference>
                    <operator>GreaterThan</operator>
                    <rightValue>
                        <elementReference>formulaMaximumUsage</elementReference>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>sovUAS.Subscription_Type__c</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Electricity Cost ($)</stringValue>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>sovUAS.Subscription_Type__c</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>kWh</stringValue>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>scrvarNew_Annual_kWh</leftValueReference>
                    <operator>GreaterThan</operator>
                    <rightValue>
                        <elementReference>formulaMaximumUsage</elementReference>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>sovUAS.Opportunity__r.Customer_Group__c</leftValueReference>
                    <operator>NotEqualTo</operator>
                    <rightValue>
                        <stringValue>Anchor</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>scrReviewDisplay</name>
            <fieldText>&lt;p&gt;You selected &lt;b style=&quot;font-size: 14px; background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;{!formula_TextnewAnnualSubscription}&lt;/b&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt; &lt;/b&gt;as the new subscription amount for this UAS.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;To do that, we&apos;ll create a new Subscription Order&lt;b style=&quot;font-size: 14px;&quot;&gt; &lt;/b&gt;with the type:&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;{!pcklst_Subscription_Order_Type}&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>txt_CancellationWarning</name>
            <fieldText>&lt;p&gt;This will also set the &lt;b&gt;Next Allocation Schedule Status&lt;/b&gt; on the related UAS to &lt;b&gt;Inactive.&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>pcklst_Subscription_Order_Type</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Cancellation</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>txt_ConfirmationFooter</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;If these values look correct to you, click &lt;/span&gt;&lt;b style=&quot;background-color: rgb(255, 255, 255); color: rgb(62, 62, 60); font-size: 14px;&quot;&gt;&quot;Next&quot;&lt;/b&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt; and the Subscription Order will be automatically created an applied to the customer&apos;s UAS. If you would like to make changes, click &lt;/span&gt;&lt;b style=&quot;background-color: rgb(255, 255, 255); color: rgb(62, 62, 60); font-size: 14px;&quot;&gt;&quot;Previous&quot;&lt;/b&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>scrSO_Review_0</name>
        <label>SO Review</label>
        <locationX>466</locationX>
        <locationY>799</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>InvocableSubscriptionTransferer</targetReference>
        </connector>
        <fields>
            <name>scrReviewDisplay_0</name>
            <fieldText>&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;For the UAS being transferred away from:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;Because this is a transfer, the new subscription amount will be set to &lt;/span&gt;&lt;b style=&quot;color: rgb(47, 84, 186); font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt;{!formula_TextnewAnnualSubscription}&lt;/b&gt;&lt;b style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt; &lt;/b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;for this UAS.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;To do that, we&apos;ll create a new Subscription Order&lt;/span&gt;&lt;b style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt; &lt;/b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;with the type:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(47, 84, 186); font-size: 14px;&quot;&gt;{!pcklst_Subscription_Order_Type}&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;In addition, the Next Allocation Schedule Status will be set to &lt;/span&gt;&lt;b style=&quot;color: rgb(47, 84, 186); font-size: 14px;&quot;&gt;Inactive&lt;/b&gt;&lt;b style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;.&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;For the UAS being transferred to:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;You selected &lt;/span&gt;&lt;b style=&quot;color: rgb(47, 84, 186); font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt;{!formula_TextTransferredToNewSubscription}&lt;/b&gt;&lt;b style=&quot;color: rgb(0, 0, 0); font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt; &lt;/b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;as the new subscription amount for the UAS that is being transferred to.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;To move the equivalent size subscription (for which we might have already invoiced the client), we&apos;ll create a new Subscription Order&lt;/span&gt;&lt;b style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt; &lt;/b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;with the type:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;color: rgb(47, 84, 186); font-size: 14px;&quot;&gt;{!pcklst_Subscription_Order_Type}&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;In addition, we&apos;ll create a Subscription Order with the type &lt;/span&gt;&lt;b style=&quot;color: rgb(47, 84, 186); font-size: 14px;&quot;&gt;Resize &lt;/b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;for any changes in size during the transfer&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>txt_ConfirmationFooter_0</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);&quot;&gt;If these values look correct to you, click &lt;/span&gt;&lt;b style=&quot;background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;&quot;Next&quot;&lt;/b&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);&quot;&gt; and the subscription updates will be done automatically. To make changes, use the &lt;/span&gt;&lt;b style=&quot;background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-size: 14px;&quot;&gt;&quot;Previous&quot;&lt;/b&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);&quot;&gt; button.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>scrTransfer_Inputs</name>
        <label>Transfer Inputs</label>
        <locationX>1107</locationX>
        <locationY>799</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Get_Transferred_To_UAS</targetReference>
        </connector>
        <fields>
            <name>txt_TransferUASSelection</name>
            <fieldText>&lt;p&gt;Below, select to Utility Account Subscription that you are transferring the subscription to:&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>lookup_TransferredToUAS</name>
            <extensionName>flowruntime:lookup</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>fieldApiName</name>
                <value>
                    <stringValue>Utility_Account_Subscription__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>UAS</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objectApiName</name>
                <value>
                    <stringValue>Subscription_Order__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>required</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordId</name>
                <value>
                    <elementReference>sov_SOTransferTo.Utility_Account_Subscription__c</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>sov_SOTransferTo.Utility_Account_Subscription__c</assignToReference>
                <name>recordId</name>
            </outputParameters>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>scrTransfer_Inputs_0</name>
        <label>Transfer Inputs</label>
        <locationX>828</locationX>
        <locationY>799</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>assgnSet_New_Transfer_Subscriptions</targetReference>
        </connector>
        <fields>
            <name>txt_TransferredSubscriptionAmount</name>
            <fieldText>&lt;p&gt;Below, enter in the subscription amount for the UAS that is being transferred to:&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>scrvar_transferredkWh_Subscription_0</name>
            <dataType>Number</dataType>
            <fieldText>kWh Subscription</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
            <scale>2</scale>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>sov_UASTransferTo.Subscription_Type__c</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>kWh</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>scrvar_transferredAnnual_Cost_Subscription_0</name>
            <dataType>Currency</dataType>
            <fieldText>Annual Cost Subscription</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
            <scale>0</scale>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>sov_UASTransferTo.Subscription_Type__c</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Electricity Cost ($)</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>SO_Input_0</name>
        <label>Subscription Order Input</label>
        <locationX>1012</locationX>
        <locationY>566</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>dec_Type</targetReference>
        </connector>
        <fields>
            <name>txtTypeSelection_0</name>
            <fieldText>&lt;p&gt;Choose the Type of Subscription Order you&apos;d like to create.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>pcklst_Subscription_Order_Type</name>
            <choiceReferences>pcs_SO_Type_Picklist</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Subscription Order Type</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>txt_Commentsinfo_0</name>
            <fieldText>&lt;p&gt;If you would like to leave any comments about this Subscription Order, you can put them here:&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>var_SOComments</name>
            <dataType>String</dataType>
            <fieldText>Comments</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Success_0</name>
        <label>Success</label>
        <locationX>1245</locationX>
        <locationY>2020</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>txt_End</name>
            <fieldText>&lt;p&gt;The subscription(s) have been updated, click Finish to exit.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>19</locationX>
        <locationY>553</locationY>
        <connector>
            <targetReference>Get_UAS</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Error_Log</name>
        <label>Error Log</label>
        <locationX>244</locationX>
        <locationY>1944</locationY>
        <connector>
            <targetReference>Error</targetReference>
        </connector>
        <flowName>Error_Log_Creation</flowName>
        <inputAssignments>
            <name>socv_ErrorLog</name>
            <value>
                <elementReference>socv_ErrorLog</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>socv_ErrorLog</assignToReference>
            <name>socv_ErrorLog</name>
        </outputAssignments>
    </subflows>
    <textTemplates>
        <name>errormessage</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>Flow: User Subscription Order Creation
Record: {!$Flow.CurrentRecord}
Message: {!$Flow.FaultMessage}</text>
    </textTemplates>
    <textTemplates>
        <name>varErrorMessage</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;An Error Occurred in the User Subscription Order Creation Flow:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!$Flow.FaultMessage}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>availableCapacity</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>socv_ErrorLog</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Error_Log__c</objectType>
    </variables>
    <variables>
        <name>socv_SO</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Subscription_Order__c</objectType>
    </variables>
    <variables>
        <name>socv_Transfer</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Subscription_Transfer__c</objectType>
    </variables>
    <variables>
        <name>socv_UAS</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Utility_Account_Subscription__c</objectType>
    </variables>
    <variables>
        <name>sov_ErrorLog</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Error_Log__c</objectType>
    </variables>
    <variables>
        <name>sov_SOTransferTo</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Subscription_Order__c</objectType>
    </variables>
    <variables>
        <description>New SO that is created in the flow.</description>
        <name>sov_SubscriptionOrder</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Subscription_Order__c</objectType>
    </variables>
    <variables>
        <name>sov_Transfer</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Subscription_Transfer__c</objectType>
    </variables>
    <variables>
        <name>sov_UASTransferTo</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Utility_Account_Subscription__c</objectType>
    </variables>
    <variables>
        <name>sovSizingMethod</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>This is the s object variable for the UAS that launches the flow.</description>
        <name>sovUAS</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Utility_Account_Subscription__c</objectType>
    </variables>
    <variables>
        <name>var_newAnnualCost</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>var_newAnnualkWh</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>var_TransferredNewAnnualCost</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>var_transferredNewAnnualkWh</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <description>UAS ID that is passed through the URL of the flow when it is launched.</description>
        <name>var_UASID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
