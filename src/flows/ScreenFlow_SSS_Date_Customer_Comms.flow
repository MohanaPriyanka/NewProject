<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <description>Sends emails to customers via enrollment in Marketing Cloud journey, along with specified data/merge fields</description>
        <name>Enroll_Contacts_in_Journey_0_0_0</name>
        <label>Enroll Contacts in Marketing Cloud Journey</label>
        <locationX>138</locationX>
        <locationY>2462</locationY>
        <actionName>MarketingJourneyEnroller</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Log_Transaction_0_0</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>details</name>
            <value>
                <elementReference>enrollments</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>get_Send_Bills_Contacts</name>
        <label>Get Contacts to Send Email To</label>
        <locationX>270</locationX>
        <locationY>974</locationY>
        <actionName>InvocableSendBillsContactsSelector</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Additional_Input_required_before_sending_email</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>includeActiveALSOnly</name>
            <value>
                <elementReference>forActiveALSOnly</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sharedSolarSystemId</name>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>emailContactList</assignToReference>
            <name>output</name>
        </outputParameters>
    </actionCalls>
    <apiVersion>51.0</apiVersion>
    <assignments>
        <name>Add_email_variables_to_collection</name>
        <label>Add email variables to collection</label>
        <locationX>138</locationX>
        <locationY>1790</locationY>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varContactProperties</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varBrandKeyProperties</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varUCBfromSSS</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varSSSName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varSSSSeason</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varEmail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varDateAdded</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Marketing_Journey_Enrollment_Details</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_email_variables_to_collection_0</name>
        <label>Add email variables to collection</label>
        <locationX>402</locationX>
        <locationY>1790</locationY>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varContactProperties</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varBrandKeyProperties</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varUCBfromSSS</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varSSSName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varEmail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>tempProperties</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varDateAdded</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Marketing_Journey_Enrollment_Details_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Journey_Enrollment</name>
        <label>Add Journey Enrollment</label>
        <locationX>138</locationX>
        <locationY>2030</locationY>
        <assignmentItems>
            <assignToReference>enrollments</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>enrollmentDetail</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Change_in_COD_Contacts</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Journey_Enrollment_0_0</name>
        <label>Add Journey Enrollment</label>
        <locationX>402</locationX>
        <locationY>2030</locationY>
        <assignmentItems>
            <assignToReference>enrollments</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>enrollmentDetail</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Credits_Flowing_Contacts</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_email_related_variables</name>
        <label>Set email related variables</label>
        <locationX>138</locationX>
        <locationY>1670</locationY>
        <assignmentItems>
            <assignToReference>varContactProperties.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>ContactId</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varContactProperties.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Change_in_COD_Contacts.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varBrandKeyProperties.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>BrandKey</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varBrandKeyProperties.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Change_in_COD_Contacts.Account.Client_Brand_Key__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUCBfromSSS.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>UCB</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUCBfromSSS.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getSSSData.UCB__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varSSSName.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>SSSName</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varSSSName.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getSSSData.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varSSSSeason.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>SSSSeason</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varSSSSeason.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>inpNewDateForEmail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varEmail.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>EmailAddress</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varEmail.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Change_in_COD_Contacts.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varDateAdded.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>DateAdded</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varDateAdded.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_email_variables_to_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_email_related_variables_0</name>
        <label>Set email related variables</label>
        <locationX>402</locationX>
        <locationY>1670</locationY>
        <assignmentItems>
            <assignToReference>varContactProperties.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>ContactId</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varContactProperties.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Credits_Flowing_Contacts.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varBrandKeyProperties.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>BrandKey</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varBrandKeyProperties.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Credits_Flowing_Contacts.Account.Client_Brand_Key__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUCBfromSSS.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>UCB</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varUCBfromSSS.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getSSSData.UCB__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varSSSName.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>SSSName</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varSSSName.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getSSSData.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varEmail.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>EmailAddress</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varEmail.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Credits_Flowing_Contacts.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varDateAdded.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>DateAdded</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varDateAdded.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_email_variables_to_collection_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Marketing_Journey_Enrollment_Details</name>
        <label>Set Marketing Journey Enrollment Details</label>
        <locationX>138</locationX>
        <locationY>1910</locationY>
        <assignmentItems>
            <assignToReference>enrollmentDetail.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Change_in_COD_Contacts.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>enrollmentDetail.EventDefinitionKey</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>APIEvent-3fb6460c-d54c-efa9-6636-fee9000b100c</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>enrollmentDetail.EventProperties</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>tempProperties</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Journey_Enrollment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Marketing_Journey_Enrollment_Details_0_0</name>
        <label>Set Marketing Journey Enrollment Details</label>
        <locationX>402</locationX>
        <locationY>1910</locationY>
        <assignmentItems>
            <assignToReference>enrollmentDetail.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Credits_Flowing_Contacts.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>enrollmentDetail.EventDefinitionKey</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>APIEvent-9f26302c-0e8b-9358-dd8e-e00a7dc1432b</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>enrollmentDetail.EventProperties</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>tempProperties</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Journey_Enrollment_0_0</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>choiceActualCODDate</name>
        <choiceText>Actual COD Date</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>COD Date</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceActualPTODate</name>
        <choiceText>Actual PTO Date</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ActualPTODate</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceEstimatedDates</name>
        <choiceText>Est. PTO/COD Dates ({!getSSSData.Estimated_PTO_Date_MANUAL__c} &amp;amp; {!getSSSData.Estimated_COD_Date_Manual__c})</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Estimated Dates</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceManualCODDate</name>
        <choiceText>entered manually below:</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>NewCODDate</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceNotifyCustomersNo</name>
        <choiceText>No</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>false</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceNotifyCustomersYes</name>
        <choiceText>Yes</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>true</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceSetCODtoFourWeeks</name>
        <choiceText>four weeks from PTO date</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>FourWeeks</stringValue>
        </value>
    </choices>
    <decisions>
        <name>Additional_Input_required_before_sending_email</name>
        <label>Additional Input required before sending email?</label>
        <locationX>270</locationX>
        <locationY>1094</locationY>
        <defaultConnector>
            <targetReference>Enroll_Contacts_in_Marketing_Cloud_Journey</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceEstimatedDates</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Review_SSS_Merge_Fields</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>decisionNotify_Customers</name>
        <label>Notify Customers</label>
        <locationX>600</locationX>
        <locationY>854</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_notify_customers</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Notify_Customers</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceNotifyCustomersYes</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Send_Bills_Contacts</targetReference>
            </connector>
            <label>Yes, notify customers</label>
        </rules>
        <rules>
            <name>No_don_t_notify_customers</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Notify_Customers</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceNotifyCustomersNo</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Confirmation_Screen</targetReference>
            </connector>
            <label>No, don&apos;t notify customers</label>
        </rules>
    </decisions>
    <decisions>
        <name>Enroll_Contacts_in_Marketing_Cloud_Journey</name>
        <label>Enroll Contacts in Marketing Cloud Journey</label>
        <locationX>270</locationX>
        <locationY>1430</locationY>
        <defaultConnector>
            <targetReference>No_Email_End_Screen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Send_Change_in_COD_Email</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceEstimatedDates</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Change_in_COD_Contacts</targetReference>
            </connector>
            <label>Change in COD</label>
        </rules>
        <rules>
            <name>Send_Credits_Flowing_Email</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceActualCODDate</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Credits_Flowing_Contacts</targetReference>
            </connector>
            <label>Credits Flowing</label>
        </rules>
    </decisions>
    <decisions>
        <name>Enrollments_Ready_to_Send</name>
        <label>Enrollments Ready to Send?</label>
        <locationX>270</locationX>
        <locationY>2342</locationY>
        <defaultConnector>
            <targetReference>No_Enrollments_Found</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Enrollments Found</defaultConnectorLabel>
        <rules>
            <name>Enrollments_Ready</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>enrollments</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Enroll_Contacts_in_Journey_0_0_0</targetReference>
            </connector>
            <label>Enrollments Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>What_Date_is_being_updated</name>
        <label>What Date is being updated?</label>
        <locationX>600</locationX>
        <locationY>518</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>EstimatedDates</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceEstimatedDates</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_SSS_PTO_Date</targetReference>
            </connector>
            <label>Estimated Dates</label>
        </rules>
        <rules>
            <name>ActualCOD_Date</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceActualCODDate</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_SSS_COD_Date</targetReference>
            </connector>
            <label>Actual COD Date</label>
        </rules>
        <rules>
            <name>Actual_PTO_Date</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceActualPTODate</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_SSS_Actual_PTO_Date</targetReference>
            </connector>
            <label>Actual PTO Date</label>
        </rules>
    </decisions>
    <formulas>
        <name>ffConfirmation</name>
        <dataType>String</dataType>
        <expression>&quot;The date(s) have been updated&quot;&amp; IF({!Yes_notify_customers},&quot; and emails to customers have been queued for send!&quot;,&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <description>Preview of body of email sent to customer regarding SSS change. NOTE: The emails are sent from Marketing Cloud, so this formula&apos;s results is not consistent with what customers actually receive. Please see Marketing Cloud for details.</description>
        <name>ffEmailBody</name>
        <dataType>String</dataType>
        <expression>CASE({!selectedDateToUpdateOnSSS},
{!choiceActualCODDate}, &quot;Thanks for contributing clean energy to the grid (See Marketing Cloud for full email)&quot;,
{!choiceEstimatedDates}, &quot;Your solar farm&apos;s estimated completion date has moved (See Marketing Cloud for full email)&quot;,
&quot;ERROR&quot;
)</expression>
    </formulas>
    <formulas>
        <description>Subject of email sent to customer regarding SSS change. NOTE: The emails are sent from Marketing Cloud, so this formula&apos;s results may not be consistent with what customers actually receive. Please see Marketing Cloud for details.</description>
        <name>ffEmailSubject</name>
        <dataType>String</dataType>
        <expression>CASE({!selectedDateToUpdateOnSSS},
{!choiceActualCODDate},&quot; Your solar farm is live&quot;,
{!choiceEstimatedDates}, &quot;Update to your solar farm completion date&quot;,
&quot;ERROR&quot;
)</expression>
    </formulas>
    <formulas>
        <description>Email template name that will be sent based on the type of date that is being updated</description>
        <name>ffEmailTemplateName</name>
        <dataType>String</dataType>
        <expression>CASE({!selectedDateToUpdateOnSSS},
{!choiceActualCODDate},&quot;Credits_Flowing&quot;,
{!choiceEstimatedDates},&quot;Change_in_COD_Date&quot;,
&quot;ERROR&quot;
)</expression>
    </formulas>
    <formulas>
        <name>ffMessageDetails</name>
        <dataType>String</dataType>
        <expression>IF(
    {!EstimatedDates},
    TEXT({!getSSSData.Estimated_PTO_Date_MANUAL__c})&amp;&quot;→&quot;&amp;TEXT({!New_Est_PTO_Date})&amp;&quot; &apos;&quot;&amp;{!inpNewDateForEmail}&amp;&quot;&apos;&quot;,
    TEXT({!getSSSData.Estimated_COD_Date_Manual__c})&amp;&quot;→&quot;&amp;TEXT({!New_Actual_COD_Date})
    )</expression>
    </formulas>
    <formulas>
        <name>ffNewDateForEmail</name>
        <dataType>String</dataType>
        <expression>CASE(
MONTH({!New_Est_PTO_Date} ),
1, &quot;Winter &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
2, &quot;Winter &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
3,  &quot;Spring &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
4, &quot;Spring &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
5, &quot;Spring &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
6, &quot;Summer &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
7, &quot;Summer &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
8, &quot;Summer &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
9, &quot;Fall &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
10, &quot;Fall &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
11, &quot;Fall &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
12, &quot;Winter  &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
&quot;ERROR&quot;
)</expression>
    </formulas>
    <formulas>
        <description>Calculates the Est COD Date. If entered manually use that, otherwise make it 4 weeks from the Actual or Est. PTO date entered by the user. Only one of the PTO dates can be entered.</description>
        <name>ffNewEstCODDate</name>
        <dataType>Date</dataType>
        <expression>BLANKVALUE({!New_Est_COD_Date},BLANKVALUE({!New_Est_PTO_Date},{!New_Actual_PTO_Date})+28)</expression>
    </formulas>
    <formulas>
        <description>Determines if we should only notify customers with an active ALS</description>
        <name>forActiveALSOnly</name>
        <dataType>Boolean</dataType>
        <expression>IF({!ActualCOD_Date},TRUE,FALSE)</expression>
    </formulas>
    <interviewLabel>ScreenFlow: SSS Date &amp; Customer Comms {!$Flow.CurrentDateTime}</interviewLabel>
    <label>ScreenFlow: SSS Date &amp; Customer Comms</label>
    <loops>
        <name>Change_in_COD_Contacts</name>
        <label>Change in COD Contacts</label>
        <locationX>50</locationX>
        <locationY>1550</locationY>
        <collectionReference>emailContactList</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Set_email_related_variables</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Enrollments_Ready_to_Send</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Credits_Flowing_Contacts</name>
        <label>Credits Flowing Contacts</label>
        <locationX>314</locationX>
        <locationY>1550</locationY>
        <collectionReference>emailContactList</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Set_email_related_variables_0</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Enrollments_Ready_to_Send</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <description>Logs a fake email as an EmailMessage record so that we have a log of this transaction happening</description>
        <name>Log_Transaction_0_0</name>
        <label>Log Transaction (Email)</label>
        <locationX>138</locationX>
        <locationY>2582</locationY>
        <connector>
            <targetReference>Confirmation_Screen</targetReference>
        </connector>
        <inputAssignments>
            <field>Message_Details__c</field>
            <value>
                <elementReference>ttMessageDetails</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RelatedToId</field>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>3</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <elementReference>ffEmailSubject</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>TextBody</field>
            <value>
                <elementReference>ffEmailBody</elementReference>
            </value>
        </inputAssignments>
        <object>EmailMessage</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Get_Email_Messages</name>
        <label>Get Email Messages</label>
        <locationX>600</locationX>
        <locationY>278</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SSS_Date_Updates</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RelatedToId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>EmailMessage</object>
        <sortField>MessageDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getSSSData</name>
        <label>getSSSData</label>
        <locationX>600</locationX>
        <locationY>158</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Email_Messages</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Shared_Solar_System__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_SSS_Actual_PTO_Date</name>
        <label>Update SSS Actual PTO Date</label>
        <locationX>732</locationX>
        <locationY>638</locationY>
        <connector>
            <targetReference>decisionNotify_Customers</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Actual_PTO_Date_MANUAL__c</field>
            <value>
                <elementReference>New_Actual_PTO_Date</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Estimated_COD_Date_Manual__c</field>
            <value>
                <elementReference>ffNewEstCODDate</elementReference>
            </value>
        </inputAssignments>
        <object>Shared_Solar_System__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SSS_COD_Date</name>
        <label>Update SSS COD Date</label>
        <locationX>468</locationX>
        <locationY>638</locationY>
        <connector>
            <targetReference>decisionNotify_Customers</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Actual_COD_Date__c</field>
            <value>
                <elementReference>New_Actual_COD_Date</elementReference>
            </value>
        </inputAssignments>
        <object>Shared_Solar_System__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SSS_PTO_Date</name>
        <label>Update SSS PTO Date</label>
        <locationX>204</locationX>
        <locationY>638</locationY>
        <connector>
            <targetReference>decisionNotify_Customers</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Estimated_COD_Date_Manual__c</field>
            <value>
                <elementReference>ffNewEstCODDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Estimated_PTO_Date_MANUAL__c</field>
            <value>
                <elementReference>New_Est_PTO_Date</elementReference>
            </value>
        </inputAssignments>
        <object>Shared_Solar_System__c</object>
    </recordUpdates>
    <screens>
        <name>Confirmation_Screen</name>
        <label>Confirmation Screen</label>
        <locationX>600</locationX>
        <locationY>2894</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>screenConfirmation</name>
            <fieldText>&lt;p&gt;{!ffConfirmation}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>No_Email_End_Screen</name>
        <label>No Email End Screen</label>
        <locationX>490</locationX>
        <locationY>1550</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Error_Notice_0_0</name>
            <fieldText>&lt;p&gt;The date(s) have been updated on the Shared Solar System. No emails have been sent to customers.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>No_Enrollments_Found</name>
        <label>No Enrollments Found</label>
        <locationX>402</locationX>
        <locationY>2462</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Error_Notice_0</name>
            <fieldText>&lt;p&gt;The date(s) have been updated on the Shared Solar System, however &lt;b style=&quot;color: rgb(255, 0, 0);&quot;&gt;an error has occurred, and emails may not have been sent to customers. Please contact BizApps for assistance.&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Review_SSS_Merge_Fields</name>
        <label>Review SSS Merge Fields</label>
        <locationX>138</locationX>
        <locationY>1214</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Enroll_Contacts_in_Marketing_Cloud_Journey</targetReference>
        </connector>
        <fields>
            <name>inpNewDateForEmail</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>ffNewDateForEmail</elementReference>
            </defaultValue>
            <fieldText>What&apos;s the new go-live date to share with the customer? You can use the default value below or enter a custom value.</fieldText>
            <fieldType>InputField</fieldType>
            <helpText>&lt;p&gt;This value will show up in t&lt;/p&gt;</helpText>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>dispEmailSendInfo</name>
            <fieldText>&lt;p&gt;The text above will be used in the bolded merge field below:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;&quot;Just a heads up that the estimated completion date of the solar farm you&apos;re subscribed to, Solar Farm Name,&amp;nbsp;has changed to &lt;/i&gt;&lt;b&gt;&lt;i&gt;New Go Live Date&lt;/i&gt;&lt;/b&gt;&lt;i&gt;.&quot;&lt;/i&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>datatableEmailSends</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>EmailMessage</typeValue>
            </dataTypeMappings>
            <extensionName>c:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>columnFields</name>
                <value>
                    <stringValue>MessageDate,Subject,Message_Details__c,EmailTemplateId</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnFilters</name>
                <value>
                    <stringValue>All</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnWidths</name>
                <value>
                    <stringValue>MessageDate:183, Subject:234, Message_Details__c:356, EmailTemplateId:206</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnWraps</name>
                <value>
                    <stringValue>EmailTemplateId:false, MessageDate:false, Message_Details__c:true, Subject:true</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isDisplayHeader</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableLabel</name>
                <value>
                    <stringValue>Previous Emails</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableIcon</name>
                <value>
                    <stringValue>standard:announcement</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>hideCheckboxColumn</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableBorder</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>showRowNumbers</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objectName</name>
                <value>
                    <stringValue>EmailMessage</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>Get_Email_Messages</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>SSS_Date_Updates</name>
        <label>SSS Date Updates</label>
        <locationX>600</locationX>
        <locationY>398</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>What_Date_is_being_updated</targetReference>
        </connector>
        <fields>
            <name>dispCurrentCODDate_0</name>
            <fieldText>&lt;p&gt;What date would you like to update?&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>selectedDateToUpdateOnSSS</name>
            <choiceReferences>choiceEstimatedDates</choiceReferences>
            <choiceReferences>choiceActualPTODate</choiceReferences>
            <choiceReferences>choiceActualCODDate</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Select a Date to update:</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>New_Actual_COD_Date</name>
            <dataType>Date</dataType>
            <fieldText>New Actual COD Date</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;Actual COD Date must be today or earlier.&lt;/p&gt;</errorMessage>
                <formulaExpression>{!New_Actual_COD_Date} &lt;= TODAY()</formulaExpression>
            </validationRule>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceActualCODDate</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>New_Est_PTO_Date</name>
            <dataType>Date</dataType>
            <fieldText>New Est. PTO Date</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceEstimatedDates</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>New_Actual_PTO_Date</name>
            <dataType>Date</dataType>
            <fieldText>New Actual PTO Date</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceActualPTODate</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>New_COD_Date</name>
            <choiceReferences>choiceSetCODtoFourWeeks</choiceReferences>
            <choiceReferences>choiceManualCODDate</choiceReferences>
            <dataType>String</dataType>
            <defaultSelectedChoiceReference>choiceSetCODtoFourWeeks</defaultSelectedChoiceReference>
            <fieldText>New Est. COD Date should be</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>or</conditionLogic>
                <conditions>
                    <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceEstimatedDates</elementReference>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceActualPTODate</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>New_Est_COD_Date</name>
            <dataType>Date</dataType>
            <fieldText>New Est. COD Date</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>New_COD_Date</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceManualCODDate</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Notify_Customers</name>
            <choiceReferences>choiceNotifyCustomersYes</choiceReferences>
            <choiceReferences>choiceNotifyCustomersNo</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Notify Customers?</fieldText>
            <fieldType>RadioButtons</fieldType>
            <helpText>&lt;p&gt;This only applies if the project has customers assigned.&lt;/p&gt;</helpText>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                    <operator>NotEqualTo</operator>
                    <rightValue>
                        <elementReference>choiceActualPTODate</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>datatableEmailSends_0</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>EmailMessage</typeValue>
            </dataTypeMappings>
            <extensionName>c:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>columnFields</name>
                <value>
                    <stringValue>MessageDate,Subject,Message_Details__c,EmailTemplateId</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnFilters</name>
                <value>
                    <stringValue>All</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnWidths</name>
                <value>
                    <stringValue>MessageDate:183, Subject:234, Message_Details__c:355, EmailTemplateId:206</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnWraps</name>
                <value>
                    <stringValue>MessageDate:false, Subject:true, Message_Details__c:true, EmailTemplateId:false</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isDisplayHeader</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableLabel</name>
                <value>
                    <stringValue>Previous Emails</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableIcon</name>
                <value>
                    <stringValue>standard:announcement</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>hideCheckboxColumn</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>showRowNumbers</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objectName</name>
                <value>
                    <stringValue>EmailMessage</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>Get_Email_Messages</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>dispWarnBeforeEmailing</name>
            <fieldText>&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;font-size: 16px;&quot;&gt;**Clicking next will send emails to the SSS&apos;s customers!**&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Notify_Customers</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceNotifyCustomersYes</elementReference>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>selectedDateToUpdateOnSSS</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceActualCODDate</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>474</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>getSSSData</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>ttContactQuery</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>select Account.Send_Bills_Contact__c from Opportunity where Shared_Solar_System__c =&apos;{!recordId}&apos;</text>
    </textTemplates>
    <textTemplates>
        <name>ttMessageDetails</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;&lt;b&gt;Update Type:&lt;/b&gt; {!selectedDateToUpdateOnSSS}&lt;/p&gt;&lt;p&gt;&lt;b&gt;Update: &lt;/b&gt;{!ffMessageDetails}&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <description>Contacts to which an email should be sent regarding the update</description>
        <name>emailContactList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>enrollmentDetail</name>
        <apexClass>MarketingJourneyEnrollmentDetail</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Marketing Cloud Journey enrollments to be processed by Apex and sent into Marketing Cloud using the Marketing Cloud API</description>
        <name>enrollments</name>
        <apexClass>MarketingJourneyEnrollmentDetail</apexClass>
        <dataType>Apex</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Don&apos;t rename this - the flow is used on an action on the SSS

Input Variables
Flow actions let you pass the value of the record&apos;s ID field into the flow, but that&apos;s it. If your flow has a Text input variable called recordId, the action passes the record&apos;s ID into that variable at runtime. If not, it doesn&apos;t and the flow tries to run anyway.</description>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>tempProperties</name>
        <apexClass>FlowMap</apexClass>
        <dataType>Apex</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>tempProperty</name>
        <apexClass>FlowMap</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varBrandKeyProperties</name>
        <apexClass>FlowMap</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varContactProperties</name>
        <apexClass>FlowMap</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varDateAdded</name>
        <apexClass>FlowMap</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varEmail</name>
        <apexClass>FlowMap</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varSSSName</name>
        <apexClass>FlowMap</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varSSSSeason</name>
        <apexClass>FlowMap</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varUCBfromSSS</name>
        <apexClass>FlowMap</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
