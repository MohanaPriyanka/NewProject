<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>get_Send_Bills_Contacts</name>
        <label>get Send Bills Contacts</label>
        <locationX>204</locationX>
        <locationY>974</locationY>
        <actionName>InvocableSendBillsContactsSelector</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Additional_Input_required_before_sending_email</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>includeActiveALSOnly</name>
            <value>
                <elementReference>forActiveALSOnly</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sharedSolarSystemId</name>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Send_Email_to_Contacts</name>
        <label>Send Email to Contacts</label>
        <locationX>204</locationX>
        <locationY>2030</locationY>
        <actionName>InvocableMessagingService</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Confirmation_Screen</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>contactList</name>
            <value>
                <elementReference>get_Send_Bills_Contacts</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailTemplateName</name>
            <value>
                <elementReference>ffEmailTemplateName</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>templateValues</name>
            <value>
                <elementReference>mapTemplateReplacement</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <apiVersion>51.0</apiVersion>
    <assignments>
        <name>Add_Replacement_text_to_Collection</name>
        <label>Add Replacement text to Collection</label>
        <locationX>72</locationX>
        <locationY>1454</locationY>
        <assignmentItems>
            <assignToReference>mapTemplateReplacement</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varTemplateReplacement</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Email_Template</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Solar_Farm_Name_Replacement_Text_to_FlowMap</name>
        <label>Add Solar Farm Name Replacement Text to FlowMap</label>
        <locationX>204</locationX>
        <locationY>1910</locationY>
        <assignmentItems>
            <assignToReference>mapTemplateReplacement</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varTemplateReplacement</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Send_Email_to_Contacts</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Solar_Farm_Date_Replacement_Text</name>
        <label>Assign Solar Farm Date Replacement Text</label>
        <locationX>72</locationX>
        <locationY>1334</locationY>
        <assignmentItems>
            <assignToReference>varTemplateReplacement.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>{{{new_date}}}</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varTemplateReplacement.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>inpNewDateForEmail</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Replacement_text_to_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Solar_Farm_Name_Replacement_Text</name>
        <label>Assign Solar Farm Name Replacement Text</label>
        <locationX>204</locationX>
        <locationY>1790</locationY>
        <assignmentItems>
            <assignToReference>varTemplateReplacement.key</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>{{{solar_farm_name}}}</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varTemplateReplacement.value</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getSSSData.Name</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Solar_Farm_Name_Replacement_Text_to_FlowMap</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>choiceActualCODDate</name>
        <choiceText>Actual COD Date</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>COD Date</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceActualPTODate</name>
        <choiceText>Actual PTO Date</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ActualPTODate</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceEstimatedDates</name>
        <choiceText>Est. PTO/COD Dates ({!getSSSData.Estimated_PTO_Date_MANUAL__c} &amp;amp; {!getSSSData.Estimated_COD_Date_Manual__c})</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Estimated Dates</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceManualCODDate</name>
        <choiceText>entered manually below:</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>NewCODDate</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceNotifyCustomersNo</name>
        <choiceText>No</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>false</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceNotifyCustomersYes</name>
        <choiceText>Yes</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>true</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceSetCODtoFourWeeks</name>
        <choiceText>four weeks from PTO date</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>FourWeeks</stringValue>
        </value>
    </choices>
    <decisions>
        <name>Additional_Input_required_before_sending_email</name>
        <label>Additional Input required before sending email?</label>
        <locationX>204</locationX>
        <locationY>1094</locationY>
        <defaultConnector>
            <targetReference>Get_Email_Template</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selDate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceEstimatedDates</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Review_SSS_Merge_Fields</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>decisionNotify_Customers</name>
        <label>Notify Customers</label>
        <locationX>446</locationX>
        <locationY>854</locationY>
        <defaultConnector>
            <targetReference>Confirmation_Screen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_notify_customers</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Notify_Customers</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceNotifyCustomersYes</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Send_Bills_Contacts</targetReference>
            </connector>
            <label>Yes, notify customers</label>
        </rules>
        <rules>
            <name>No_don_t_notify_customers</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Notify_Customers</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceNotifyCustomersNo</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Confirmation_Screen</targetReference>
            </connector>
            <label>No, don&apos;t notify customers</label>
        </rules>
    </decisions>
    <decisions>
        <name>What_Date_is_being_updated</name>
        <label>What Date is being updated?</label>
        <locationX>446</locationX>
        <locationY>518</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>EstimatedDates</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selDate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceEstimatedDates</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_SSS_PTO_Date</targetReference>
            </connector>
            <label>Estimated Dates</label>
        </rules>
        <rules>
            <name>ActualCOD_Date</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selDate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceActualCODDate</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_SSS_COD_Date</targetReference>
            </connector>
            <label>Actual COD Date</label>
        </rules>
        <rules>
            <name>Actual_PTO_Date</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>selDate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>choiceActualPTODate</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_SSS_Actual_PTO_Date</targetReference>
            </connector>
            <label>Actual PTO Date</label>
        </rules>
    </decisions>
    <formulas>
        <name>ffConfirmation</name>
        <dataType>String</dataType>
        <expression>&quot;The date(s) have been updated&quot;&amp; IF({!Yes_notify_customers},&quot; and emails have been sent&quot;,&quot;&quot;)&amp;&quot;!&quot;</expression>
    </formulas>
    <formulas>
        <description>Email template name that will be sent based on the type of date that is being updated</description>
        <name>ffEmailTemplateName</name>
        <dataType>String</dataType>
        <expression>CASE({!selDate},
{!choiceActualCODDate},&quot;Credits_Flowing&quot;,
{!choiceEstimatedDates},&quot;Change_in_COD_Date&quot;,
&quot;ERROR&quot;
)</expression>
    </formulas>
    <formulas>
        <name>ffMessageDetails</name>
        <dataType>String</dataType>
        <expression>IF(
    {!EstimatedDates},
    TEXT({!getSSSData.Estimated_PTO_Date_MANUAL__c})&amp;&quot;→&quot;&amp;TEXT({!New_Est_PTO_Date})&amp;&quot; &apos;&quot;&amp;{!inpNewDateForEmail}&amp;&quot;&apos;&quot;,
    TEXT({!getSSSData.Estimated_COD_Date_Manual__c})&amp;&quot;→&quot;&amp;TEXT({!New_Actual_COD_Date})
    )</expression>
    </formulas>
    <formulas>
        <name>ffNewDateForEmail</name>
        <dataType>String</dataType>
        <expression>CASE(
MONTH({!New_Est_PTO_Date} ),
1, &quot;Winter &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
2, &quot;Winter &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
3,  &quot;Spring &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
4, &quot;Spring &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
5, &quot;Spring &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
6, &quot;Summer &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
7, &quot;Summer &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
8, &quot;Summer &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
9, &quot;Fall &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
10, &quot;Fall &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
11, &quot;Fall &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
12, &quot;Winter  &quot; +   TEXT(YEAR({!New_Est_PTO_Date} )),
&quot;ERROR&quot;
)</expression>
    </formulas>
    <formulas>
        <description>Calculates the Est COD Date. If entered manually use that, otherwise make it 4 weeks from the Actual or Est. PTO date entered by the user. Only one of the PTO dates can be entered.</description>
        <name>ffNewEstCODDate</name>
        <dataType>Date</dataType>
        <expression>BLANKVALUE({!New_Est_COD_Date},BLANKVALUE({!New_Est_PTO_Date},{!New_Actual_PTO_Date})+28)</expression>
    </formulas>
    <formulas>
        <description>Determines if we should only notify customers with an active ALS</description>
        <name>forActiveALSOnly</name>
        <dataType>Boolean</dataType>
        <expression>IF({!ActualCOD_Date},TRUE,FALSE)</expression>
    </formulas>
    <interviewLabel>ScreenFlow: SSS Date &amp; Customer Comms {!$Flow.CurrentDateTime}</interviewLabel>
    <label>ScreenFlow: SSS Date &amp; Customer Comms</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Log_Email_Send</name>
        <label>Log Email Send</label>
        <locationX>446</locationX>
        <locationY>2366</locationY>
        <inputAssignments>
            <field>EmailTemplateId</field>
            <value>
                <elementReference>Get_Email_Template.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Message_Details__c</field>
            <value>
                <elementReference>ttMessageDetails</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RelatedToId</field>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>3</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <elementReference>Get_Email_Template.Subject</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>TextBody</field>
            <value>
                <elementReference>Get_Email_Template.Body</elementReference>
            </value>
        </inputAssignments>
        <object>EmailMessage</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Get_Email_Messages</name>
        <label>Get Email Messages</label>
        <locationX>446</locationX>
        <locationY>278</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SSS_Date_Updates</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RelatedToId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>EmailMessage</object>
        <sortField>MessageDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Email_Template</name>
        <label>Get Email Template</label>
        <locationX>204</locationX>
        <locationY>1670</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Solar_Farm_Name_Replacement_Text</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ffEmailTemplateName</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>EmailTemplate</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getSSSData</name>
        <label>getSSSData</label>
        <locationX>446</locationX>
        <locationY>158</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Email_Messages</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Shared_Solar_System__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_SSS_Actual_PTO_Date</name>
        <label>Update SSS Actual PTO Date</label>
        <locationX>578</locationX>
        <locationY>638</locationY>
        <connector>
            <targetReference>decisionNotify_Customers</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Actual_PTO_Date_MANUAL__c</field>
            <value>
                <elementReference>New_Actual_PTO_Date</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Estimated_COD_Date_Manual__c</field>
            <value>
                <elementReference>ffNewEstCODDate</elementReference>
            </value>
        </inputAssignments>
        <object>Shared_Solar_System__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SSS_COD_Date</name>
        <label>Update SSS COD Date</label>
        <locationX>314</locationX>
        <locationY>638</locationY>
        <connector>
            <targetReference>decisionNotify_Customers</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Actual_COD_Date__c</field>
            <value>
                <elementReference>New_Actual_COD_Date</elementReference>
            </value>
        </inputAssignments>
        <object>Shared_Solar_System__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SSS_PTO_Date</name>
        <label>Update SSS PTO Date</label>
        <locationX>50</locationX>
        <locationY>638</locationY>
        <connector>
            <targetReference>decisionNotify_Customers</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Estimated_COD_Date_Manual__c</field>
            <value>
                <elementReference>ffNewEstCODDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Estimated_PTO_Date_MANUAL__c</field>
            <value>
                <elementReference>New_Est_PTO_Date</elementReference>
            </value>
        </inputAssignments>
        <object>Shared_Solar_System__c</object>
    </recordUpdates>
    <screens>
        <name>Confirmation_Screen</name>
        <label>Confirmation Screen</label>
        <locationX>446</locationX>
        <locationY>2246</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Log_Email_Send</targetReference>
        </connector>
        <fields>
            <name>screenConfirmation</name>
            <fieldText>&lt;p&gt;{!ffConfirmation}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Review_SSS_Merge_Fields</name>
        <label>Review SSS Merge Fields</label>
        <locationX>72</locationX>
        <locationY>1214</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Assign_Solar_Farm_Date_Replacement_Text</targetReference>
        </connector>
        <fields>
            <name>inpNewDateForEmail</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>ffNewDateForEmail</elementReference>
            </defaultValue>
            <fieldText>What&apos;s the new go-live date to share with the customer? You can use the default value below or enter a custom value.</fieldText>
            <fieldType>InputField</fieldType>
            <helpText>&lt;p&gt;This value will show up in t&lt;/p&gt;</helpText>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>dispEmailSendInfo</name>
            <fieldText>&lt;p&gt;The text above will be used in the bolded merge field below:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;&quot;Just a heads up that the estimated completion date of the solar farm you&apos;re subscribed to, Solar Farm Name,&amp;nbsp;has changed to &lt;/i&gt;&lt;b&gt;&lt;i&gt;New Go Live Date&lt;/i&gt;&lt;/b&gt;&lt;i&gt;.&quot;&lt;/i&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>datatableEmailSends</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>EmailMessage</typeValue>
            </dataTypeMappings>
            <extensionName>c:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>columnFields</name>
                <value>
                    <stringValue>MessageDate,Subject,Message_Details__c,EmailTemplateId</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnFilters</name>
                <value>
                    <stringValue>All</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnWidths</name>
                <value>
                    <stringValue>MessageDate:183, Subject:234, Message_Details__c:356, EmailTemplateId:206</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnWraps</name>
                <value>
                    <stringValue>EmailTemplateId:false, MessageDate:false, Message_Details__c:true, Subject:true</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isDisplayHeader</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableLabel</name>
                <value>
                    <stringValue>Previous Emails</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableIcon</name>
                <value>
                    <stringValue>standard:announcement</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>hideCheckboxColumn</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableBorder</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>showRowNumbers</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objectName</name>
                <value>
                    <stringValue>EmailMessage</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>Get_Email_Messages</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>SSS_Date_Updates</name>
        <label>SSS Date Updates</label>
        <locationX>446</locationX>
        <locationY>398</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>What_Date_is_being_updated</targetReference>
        </connector>
        <fields>
            <name>dispCurrentCODDate_0</name>
            <fieldText>&lt;p&gt;What date would you like to update?&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>selDate</name>
            <choiceReferences>choiceEstimatedDates</choiceReferences>
            <choiceReferences>choiceActualPTODate</choiceReferences>
            <choiceReferences>choiceActualCODDate</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Select a Date to update:</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>New_Actual_COD_Date</name>
            <dataType>Date</dataType>
            <fieldText>New Actual COD Date</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;Actual COD Date must be today or earlier.&lt;/p&gt;</errorMessage>
                <formulaExpression>{!New_Actual_COD_Date} &lt;= TODAY()</formulaExpression>
            </validationRule>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>selDate</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceActualCODDate</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>New_Est_PTO_Date</name>
            <dataType>Date</dataType>
            <fieldText>New Est. PTO Date</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>selDate</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceEstimatedDates</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>New_Actual_PTO_Date</name>
            <dataType>Date</dataType>
            <fieldText>New Actual PTO Date</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>selDate</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceActualPTODate</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>New_COD_Date</name>
            <choiceReferences>choiceSetCODtoFourWeeks</choiceReferences>
            <choiceReferences>choiceManualCODDate</choiceReferences>
            <dataType>String</dataType>
            <defaultSelectedChoiceReference>choiceSetCODtoFourWeeks</defaultSelectedChoiceReference>
            <fieldText>New Est. COD Date should be</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>or</conditionLogic>
                <conditions>
                    <leftValueReference>selDate</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceEstimatedDates</elementReference>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>selDate</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceActualPTODate</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>New_Est_COD_Date</name>
            <dataType>Date</dataType>
            <fieldText>New Est. COD Date</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>New_COD_Date</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceManualCODDate</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Notify_Customers</name>
            <choiceReferences>choiceNotifyCustomersYes</choiceReferences>
            <choiceReferences>choiceNotifyCustomersNo</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Notify Customers?</fieldText>
            <fieldType>RadioButtons</fieldType>
            <helpText>&lt;p&gt;This only applies if the project has customers assigned.&lt;/p&gt;</helpText>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>selDate</leftValueReference>
                    <operator>NotEqualTo</operator>
                    <rightValue>
                        <elementReference>choiceActualPTODate</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>datatableEmailSends_0</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>EmailMessage</typeValue>
            </dataTypeMappings>
            <extensionName>c:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>columnFields</name>
                <value>
                    <stringValue>MessageDate,Subject,Message_Details__c,EmailTemplateId</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnFilters</name>
                <value>
                    <stringValue>All</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnWidths</name>
                <value>
                    <stringValue>MessageDate:183, Subject:234, Message_Details__c:355, EmailTemplateId:206</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnWraps</name>
                <value>
                    <stringValue>MessageDate:false, Subject:true, Message_Details__c:true, EmailTemplateId:false</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isDisplayHeader</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableLabel</name>
                <value>
                    <stringValue>Previous Emails</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableIcon</name>
                <value>
                    <stringValue>standard:announcement</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>hideCheckboxColumn</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>showRowNumbers</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objectName</name>
                <value>
                    <stringValue>EmailMessage</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>Get_Email_Messages</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>dispWarnBeforeEmailing</name>
            <fieldText>&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;font-size: 16px;&quot;&gt;**Clicking next will send emails to the SSS&apos;s customers!**&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>selDate</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceActualCODDate</elementReference>
                    </rightValue>
                </conditions>
                <conditions>
                    <leftValueReference>Notify_Customers</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>choiceNotifyCustomersYes</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>320</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>getSSSData</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>ttContactQuery</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>select Account.Send_Bills_Contact__c from Opportunity where Shared_Solar_System__c =&apos;{!recordId}&apos;</text>
    </textTemplates>
    <textTemplates>
        <name>ttMessageDetails</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;&lt;b&gt;Update Type:&lt;/b&gt; {!selDate}&lt;/p&gt;&lt;p&gt;&lt;b&gt;Update: &lt;/b&gt;{!ffMessageDetails}&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>colContactList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>mapTemplateReplacement</name>
        <apexClass>FlowMap</apexClass>
        <dataType>Apex</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <description>Don&apos;t rename this - the flow is used on an action on the SSS

Input Variables
Flow actions let you pass the value of the record&apos;s ID field into the flow, but that&apos;s it. If your flow has a Text input variable called recordId, the action passes the record&apos;s ID into that variable at runtime. If not, it doesn&apos;t and the flow tries to run anyway.</description>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varContactCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>varContactCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>varTemplateReplacement</name>
        <apexClass>FlowMap</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
