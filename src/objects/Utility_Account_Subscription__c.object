<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <enableActivities>false</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableFeeds>false</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <externalSharingModel>ControlledByParent</externalSharingModel>
    <fields>
        <fullName>Annual_Cost_Future_Rollup__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>This is a rollup of all approved subscription orders</inlineHelpText>
        <label>Annual Cost (Future)</label>
        <summarizedField>Subscription_Order__c.Change_in_Annual_Cost__c</summarizedField>
        <summaryFilterItems>
            <field>Subscription_Order__c.Approval_Status__c</field>
            <operation>equals</operation>
            <value>Approved</value>
        </summaryFilterItems>
        <summaryForeignKey>Subscription_Order__c.Utility_Account_Subscription__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Annual_Cost_of_Electricity_Current__c</fullName>
        <description>Used in SREC contracts. This is based off of the NMC value on the Opportunity. It shows how many dollars are included in the Current Customer Subscription kW DC.</description>
        <externalId>false</externalId>
        <formula>Customer_Subscription_KW_DC_STATIC__c * 
IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,

Shared_Solar_System__r.Expected_Yield_kWh_kW__c* Shared_Solar_System__r.NMC_Value__c,

Opportunity__r.Shared_Solar_System__r.Expected_Yield_kWh_kW__c* Opportunity__r.Shared_Solar_System__r.NMC_Value__c
)</formula>
        <inlineHelpText>Used in SREC contracts. This is based off of the NMC value on the Opportunity. It shows how many dollars are included in the Current Customer Subscription kW DC.</inlineHelpText>
        <label>Annual Cost of Electricity (Current)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Annual_Cost_of_Electricity__c</fullName>
        <description>Total cost of electricity at the UAL level.</description>
        <externalId>false</externalId>
        <label>Full Annual Cost of Electricity</label>
        <precision>9</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Annual_kWh_Subscription_Current__c</fullName>
        <description>Used in SMART contracts. It is the kWh equivalent of the Annual Cost of Electricity (Current) field. It shows how many kWhs are included in the Current Customer Subscription kW DC.</description>
        <externalId>false</externalId>
        <formula>IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,

Shared_Solar_System__r.Expected_Yield_kWh_kW__c,

Opportunity__r.Shared_Solar_System__r.Expected_Yield_kWh_kW__c
)*Customer_Subscription_KW_DC_STATIC__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>Used in SMART contracts. It is the kWh equivalent of the Annual Cost of Electricity (Current) field. It shows how many kWhs are included in the Current Customer Subscription kW DC.</inlineHelpText>
        <label>Annual kWh Subscription (Current)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Annual_kWh_Subscription_Future_Rollup__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>This is a rollup of all approved subscription orders.</inlineHelpText>
        <label>Annual kWh Subscription (Future)</label>
        <summarizedField>Subscription_Order__c.Change_in_Annual_kWh__c</summarizedField>
        <summaryFilterItems>
            <field>Subscription_Order__c.Approval_Status__c</field>
            <operation>equals</operation>
            <value>Approved</value>
        </summaryFilterItems>
        <summaryForeignKey>Subscription_Order__c.Utility_Account_Subscription__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Annual_kwh_subscription_future__c</fullName>
        <description>Used for SMART CS contracts. It is the counterpart to annual cost of electricity field, and is used to calculate the future customer subscription kW DC field for Opportunities with the SMART CS contract. It is populated manually.</description>
        <externalId>false</externalId>
        <inlineHelpText>Used for SMART CS contracts. It is the counterpart to annual cost of electricity field, and is used to calculate the future customer subscription kW DC field for Opportunities with the SMART CS contract. It is populated manually.</inlineHelpText>
        <label>Annual kWh Subscription (Future)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Auto_Unround__c</fullName>
        <defaultValue>true</defaultValue>
        <externalId>false</externalId>
        <label>Auto Unround</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Calculated_Customer_Subscription_kW_DC__c</fullName>
        <externalId>false</externalId>
        <formula>Calculated_NMC_Alloaction_kWh__c / 
IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,
Shared_Solar_System__r.Expected_Yield_kWh_kW__c,
Opportunity__r.Shared_Solar_System__r.Expected_Yield_kWh_kW__c
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Calculated Customer Subscription (kW DC)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Calculated_NMC_Alloaction_kWh__c</fullName>
        <externalId>false</externalId>
        <formula>calculated_annual_cost_of_electricity__c / Opportunity__r.NMC_Value__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Calculated NMC Alloaction (kWh)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Commission_Structure_Description__c</fullName>
        <externalId>false</externalId>
        <formula>IF( ISBLANK(Opportunity__r.Commission_Structure__c), &apos;Not yet invoiced&apos;,
Opportunity__r.Commission_Structure__r.Name &amp; &quot; - &quot; &amp; 
IF(Opportunity__r.Commission_Structure__r.Cents_kW_DC_Up_Front__c &gt; 0,
&apos;0&apos; &amp; TEXT(Opportunity__r.Commission_Structure__r.Cents_kW_DC_Up_Front__c) &amp; &quot; _ &quot; ,&apos;&apos;)
&amp;
IF(Opportunity__r.Commission_Structure__r.Cents_kW_DC_First_Bill__c &gt; 0,
&apos;0&apos; &amp; TEXT(Opportunity__r.Commission_Structure__r.Cents_kW_DC_First_Bill__c) &amp; &quot; _ &quot;, &apos;&apos;)
&amp;
IF(Opportunity__r.Commission_Structure__r.Cents_kW_DC_First_Bill_Paid__c &gt; 0, 
&apos;0&apos; &amp; TEXT(Opportunity__r.Commission_Structure__r.Cents_kW_DC_First_Bill_Paid__c), &apos;&apos;)
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>Used in Conga Partner Summary Doc</inlineHelpText>
        <label>Commission Structure Description</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Conga_Current_Share__c</fullName>
        <externalId>false</externalId>
        <formula>Share_of_System__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Conga Current Share (share/100)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>8</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Conga_Future_Share__c</fullName>
        <externalId>false</externalId>
        <formula>IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true
,
Future_Share_of_System_Rollup__c
,
Future_Share_of_System__c
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Conga Future Share (share/100)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>7</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Count_of_Deactive_Schedule_Zs__c</fullName>
        <externalId>false</externalId>
        <label>Count of Deactivated Allocation Schs</label>
        <summaryFilterItems>
            <field>Schedule_Z_Subscription__c.Deactivated__c</field>
            <operation>equals</operation>
            <value>True</value>
        </summaryFilterItems>
        <summaryForeignKey>Schedule_Z_Subscription__c.Utility_Account_Subscription__c</summaryForeignKey>
        <summaryOperation>count</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Count_of_Submitted_Schedule_Zs__c</fullName>
        <externalId>false</externalId>
        <label>Count of Submitted Allocation Schedules</label>
        <summaryFilterItems>
            <field>Schedule_Z_Subscription__c.Submitted__c</field>
            <operation>equals</operation>
            <value>True</value>
        </summaryFilterItems>
        <summaryForeignKey>Schedule_Z_Subscription__c.Utility_Account_Subscription__c</summaryForeignKey>
        <summaryOperation>count</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Current_Schedule_Z_Status__c</fullName>
        <externalId>false</externalId>
        <formula>IF(Total_Count_of_Schedule_Zs__c = 0, &quot;Not Yet Enacted&quot;, IF((Count_of_Deactive_Schedule_Zs__c = Total_Count_of_Schedule_Zs__c), &quot;Cancelled&quot; , &quot;Enacted&quot;))</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>Calculated by the number of Allocation Schedule Subscriptions that are enacted or not enacted</inlineHelpText>
        <label>Current Allocation Schedule Status</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Custom_Deduction_Order__c</fullName>
        <externalId>false</externalId>
        <label>Custom Deduction Order</label>
        <precision>2</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Customer_Group__c</fullName>
        <externalId>false</externalId>
        <formula>Text(Opportunity__r.Customer_Group__c)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Customer Group</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Customer_Subscription_KW_DC_STATIC__c</fullName>
        <description>Customer Subscription value at point of sale. This field is not dynamic and is populated based on a workflow.</description>
        <externalId>false</externalId>
        <inlineHelpText>Used for billing. Populated when Opportunity Stage Name is Pending BW Signature through a process builder. Once the Opp stage is set to Complete the Opp then aggregates this instead of the dynamic.</inlineHelpText>
        <label>Current Customer Subscription (kW DC)</label>
        <precision>9</precision>
        <required>false</required>
        <scale>4</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Customer_Subscription_KW_DC__c</fullName>
        <description>Made the system name logic so that Allocation Schedule customers will not change to unrounded values</description>
        <externalId>false</externalId>
        <formula>IF(

$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true
,
Future_Customer_Subscription_KWDC_Rollup__c
,

IF(AND(TEXT(Opportunity__r.Product__r.Customer_Subscription_Type__c)=&apos;kWh&apos;,Annual_kwh_subscription_future__c&gt;0),Annual_kwh_subscription_future__c/Opportunity__r.Shared_Solar_System__r.Expected_Yield_kWh_kW__c, 
IF( UAS_Number__c &gt; 1 , 

Subscribed_Annual_Cost_of_Electricity__c / Opportunity__r.NMC_Value__c / Opportunity__r.Shared_Solar_System__r.Expected_Yield_kWh_kW__c, 

IF( 

OR(Auto_Unround__c = TRUE , AND(UAS_Number__c = 1 , calculated_annual_cost_of_electricity__c != Subscribed_Annual_Cost_of_Electricity__c )), 

Subscribed_Annual_Cost_of_Electricity__c / Opportunity__r.NMC_Value__c/ Opportunity__r.Shared_Solar_System__r.Expected_Yield_kWh_kW__c, 


IF( 

OR(AND(UAS_Number__c = 1 , calculated_annual_cost_of_electricity__c = Subscribed_Annual_Cost_of_Electricity__c ), Opportunity__r.Shared_Solar_System_Name__c = &apos;Fairhaven Mill Rd&apos;, Opportunity__r.Shared_Solar_System_Name__c = &apos;Oxford Clara Barton&apos;), 

Round(( Subscribed_Annual_Cost_of_Electricity__c / Opportunity__r.NMC_Value__c/ Opportunity__r.Shared_Solar_System__r.Expected_Yield_kWh_kW__c) * 4, 0)/4,0))))
)</formula>
        <inlineHelpText>Dynamic Subscription</inlineHelpText>
        <label>Future Customer Subscription (KW DC)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>4</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Date_Client_Invoice_Sent__c</fullName>
        <description>This is the date the invoice that includes this UAS was sent to the Client. It is populated manually by Operations.</description>
        <externalId>false</externalId>
        <inlineHelpText>This is the date the invoice that includes this UAS was sent to the Client. It is populated manually by Operations.</inlineHelpText>
        <label>Date Client Invoice Sent</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Date_Removed_from_Project__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>Populated with Date Allocation Schedule Retired by Utility when &quot;Date Allocation Schedule Retired by Utility&quot; on all related Allocation Schedule Subscriptions is populated AND Date Utility Account Cancelled is NOT populated</inlineHelpText>
        <label>Date Removed from Project</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Entity_Assignment__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Entity Assignment</label>
        <referenceTo>Entity__c</referenceTo>
        <relationshipLabel>Utility Account Subscriptions</relationshipLabel>
        <relationshipName>Utility_Account_Subscriptions</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Estimated_Annual_Subscription_kWh__c</fullName>
        <description>This is displayed to customers in the customer portal.</description>
        <externalId>false</externalId>
        <formula>IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true
,
Future_Customer_Subscription_KWDC_Rollup__c
,
Customer_Subscription_KW_DC__c
)
 *  
IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true
,
 Shared_Solar_System__r.Expected_Yield_kWh_kW__c
,
Opportunity__r.Shared_Solar_System__r.Expected_Yield_kWh_kW__c
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>This is displayed to customers in the customer portal.</inlineHelpText>
        <label>Estimated Annual Subscription (kWh)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Externally_Serviced__c</fullName>
        <externalId>false</externalId>
        <formula>IF (  
 AND( 
  OR (
    ISPICKVAL(Opportunity__r.Customer_Group__c, &quot;Public Offtake&quot;),
    ISPICKVAL(Opportunity__r.Customer_Group__c, &quot;Anchor&quot;)
  ),
   
   IF(
     $CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,
      AND(
       NOT(ISPICKVAL(Shared_Solar_System__r.Billing_Anchors__c, &quot;&quot;)),
       NOT(ISPICKVAL(Shared_Solar_System__r.Billing_Anchors__c, &quot;BlueWave&quot;))
          ),

   AND(
    NOT(ISPICKVAL(Opportunity__r.Shared_Solar_System__r.Billing_Anchors__c, &quot;&quot;)),
    NOT(ISPICKVAL(Opportunity__r.Shared_Solar_System__r.Billing_Anchors__c, &quot;BlueWave&quot;))
  )
      )
 ),
TRUE, FALSE)</formula>
        <inlineHelpText>Checked if subscription is billed by RadianGen</inlineHelpText>
        <label>Externally Serviced</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Finaled__c</fullName>
        <externalId>false</externalId>
        <formula>NOT(ISBLANK( Utility_Account_Log__r.Date_Utility_Account_Cancelled__c ))</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>Checked if the Utility Account Log has a Date Utility Account Cancelled, indicating that the utility finaled this utiltiy account.</inlineHelpText>
        <label>Finaled</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Full_Anticipated_NMC_Allocation_kWh__c</fullName>
        <externalId>false</externalId>
        <formula>Annual_Cost_of_Electricity__c / Opportunity__r.NMC_Value__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Full Anticipated NMC Allocation (kWh)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Future_Customer_Subscription_KWDC_Rollup__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>This is a rollup of all approved subscription orders.</inlineHelpText>
        <label>Future Customer Subscription (KW DC)</label>
        <summarizedField>Subscription_Order__c.Approved_Change_in_Subscription__c</summarizedField>
        <summaryFilterItems>
            <field>Subscription_Order__c.Approval_Status__c</field>
            <operation>equals</operation>
            <value>Approved</value>
        </summaryFilterItems>
        <summaryForeignKey>Subscription_Order__c.Utility_Account_Subscription__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Future_Share_of_System_Rollup__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>This is a rollup of all approved subscription orders</inlineHelpText>
        <label>Future Share of System</label>
        <summarizedField>Subscription_Order__c.Approved_Change_in_Percent_Share__c</summarizedField>
        <summaryFilterItems>
            <field>Subscription_Order__c.Approval_Status__c</field>
            <operation>equals</operation>
            <value>Approved</value>
        </summaryFilterItems>
        <summaryForeignKey>Subscription_Order__c.Utility_Account_Subscription__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Future_Share_of_System__c</fullName>
        <externalId>false</externalId>
        <formula>IF(
 $CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true
,
 Future_Share_of_System_Rollup__c
,
ROUND(Customer_Subscription_KW_DC__c/ Opportunity__r.Shared_Solar_System__r.Total_System_Size_kWh_DC__c, Opportunity__r.Shared_Solar_System__r.Utility__r.Number_of_Decimal_Places__c + 2)

)</formula>
        <label>Future Share of System</label>
        <precision>18</precision>
        <required>false</required>
        <scale>5</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Percent</type>
    </fields>
    <fields>
        <fullName>Max_Account_Bill_Number__c</fullName>
        <externalId>false</externalId>
        <formula>Opportunity__r.Account.Max_Account_Bill_Number__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Max Account Bill Number</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Max_Subscription_Capacity__c</fullName>
        <externalId>false</externalId>
        <formula>IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,
Shared_Solar_System__r.Maximum_Subscription_Capacity_kW_DC__c,
Opportunity__r.Shared_Solar_System__r.Maximum_Subscription_Capacity_kW_DC__c
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Maximum Subscription Capacity (kW DC)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Maximum_Annual_Cost__c</fullName>
        <externalId>false</externalId>
        <formula>Maximum_NMC_Allocation__c * Opportunity__r.NMC_Value__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Maximum Annual Cost</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Maximum_Annual_kWh__c</fullName>
        <description>This is the maximum annual kwh that can be put on a single UAS. It is driven by the Maximum Subscription Capacity on the SSS for the UAS.</description>
        <externalId>false</externalId>
        <formula>IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,

Shared_Solar_System__r.Expected_Yield_kWh_kW__c*Shared_Solar_System__r.Maximum_Subscription_Capacity_kW_DC__c,

Opportunity__r.Shared_Solar_System__r.Expected_Yield_kWh_kW__c*Opportunity__r.Shared_Solar_System__r.Maximum_Subscription_Capacity_kW_DC__c
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>This is the maximum annual kwh that can be put on a single UAS. It is driven by the Maximum Subscription Capacity on the SSS for the UAS.</inlineHelpText>
        <label>Maximum Annual kWh</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Maximum_NMC_Allocation__c</fullName>
        <externalId>false</externalId>
        <formula>Max_Subscription_Capacity__c * 
IF(
 $CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,
  Shared_Solar_System__r.Expected_Yield_kWh_kW__c,
  Opportunity__r.Shared_Solar_System__r.Expected_Yield_kWh_kW__c
  )</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Maximum NMC Allocation</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Most_Recent_Enacted_ALSS__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <inlineHelpText>The last filing with the utility that this customer had. Stamped with the most recently enacted allocation schedule subscription. If customer drops off all allocation schedules, this field does not clear, so that it can be used for cancellation reporting.</inlineHelpText>
        <label>Most Recent Enacted ALSS</label>
        <referenceTo>Schedule_Z_Subscription__c</referenceTo>
        <relationshipLabel>Utility Account Subscriptions</relationshipLabel>
        <relationshipName>Utility_Account_Subscriptions_MostRecent</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Name_on_Account_From_Log__c</fullName>
        <externalId>false</externalId>
        <formula>Utility_Account_Log__r.Name_on_Account__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Name on Utility Account (From Log)</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Name_on_Account__c</fullName>
        <description>Customer&apos;s name on their electric bill</description>
        <externalId>false</externalId>
        <label>Name on Account</label>
        <length>100</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Net_Metering_Credit_Rate__c</fullName>
        <description>Net Metering Credit Rate at the point of sale.</description>
        <externalId>false</externalId>
        <label>Net Metering Credit Rate</label>
        <precision>9</precision>
        <required>false</required>
        <scale>5</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Next_Schedule_Z_Status__c</fullName>
        <defaultValue>&quot;Active Subscription&quot;</defaultValue>
        <externalId>false</externalId>
        <inlineHelpText>Controls whether this subscription should be added to futureAllocation Schedules. Select &apos;Active Subscription&apos; to include it, or &apos;Inactive Subscription&apos; to exclude it.</inlineHelpText>
        <label>Next Allocation Schedule Status</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Active Subscription</fullName>
                    <default>true</default>
                    <label>Active Subscription</label>
                </value>
                <value>
                    <fullName>Inactive Subscription</fullName>
                    <default>false</default>
                    <label>Inactive Subscription</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Opportunity_Stage__c</fullName>
        <externalId>false</externalId>
        <formula>Text(Opportunity__r.StageName)</formula>
        <label>Opportunity Stage</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Opportunity__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Opportunity</label>
        <referenceTo>Opportunity</referenceTo>
        <relationshipLabel>Utility Account Subscriptions</relationshipLabel>
        <relationshipName>Utility_Account_Subscriptions</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Parent_Account_Id__c</fullName>
        <description>Used by the UAS Lookup flow on Cases</description>
        <externalId>false</externalId>
        <formula>Utility_Account_Log__r.Account__r.Parent_Account_ID__c</formula>
        <label>Parent Account Id</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Partner__c</fullName>
        <externalId>false</externalId>
        <label>Partner</label>
        <length>20</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Project_Co_Assignment_Date__c</fullName>
        <externalId>false</externalId>
        <label>Project Co Assignment Date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Project_Company__c</fullName>
        <externalId>false</externalId>
        <label>XXXX Project Company</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Fairhaven Mill Rd: BWC Origination Fairhaven One, LLC</fullName>
                    <default>false</default>
                    <label>Fairhaven Mill Rd: BWC Origination Fairhaven One, LLC</label>
                </value>
                <value>
                    <fullName>Hopedale S Main St: BWC Origination 19 LLC</fullName>
                    <default>false</default>
                    <label>Hopedale S Main St: BWC Origination 19 LLC</label>
                </value>
                <value>
                    <fullName>Mendon Milford St: BWC Mystic River, LLC</fullName>
                    <default>false</default>
                    <label>Mendon Milford St: BWC Mystic River, LLC</label>
                </value>
                <value>
                    <fullName>Mendon Providence, Thayer and Bates : BWC Wading River, LLC</fullName>
                    <default>false</default>
                    <label>Mendon Providence, Thayer and Bates : BWC Wading River, LLC</label>
                </value>
                <value>
                    <fullName>Oxford Barrett P1: BWC Stillwater River, LLC</fullName>
                    <default>false</default>
                    <label>Oxford Barrett P1: BWC Stillwater River, LLC</label>
                </value>
                <value>
                    <fullName>Oxford Barrett P2: BWC French River, LLC</fullName>
                    <default>false</default>
                    <label>Oxford Barrett P2: BWC French River, LLC</label>
                </value>
                <value>
                    <fullName>Oxford Clara Barton: BWC Fivemile River, LLC</fullName>
                    <default>false</default>
                    <label>Oxford Clara Barton: BWC Fivemile River, LLC</label>
                </value>
                <value>
                    <fullName>Plympton: BWC Bluefish River, LLC</fullName>
                    <default>false</default>
                    <label>Plympton: BWC Bluefish River, LLC</label>
                </value>
                <value>
                    <fullName>Sturbridge Hare Rd: BWC Originations 8 LLC</fullName>
                    <default>false</default>
                    <label>Sturbridge Hare Rd: BWC Originations 8 LLC</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Reason_for_Cancellation__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>Moved to the Property Account, so cancellation reasons can be easily managed and viewed for multi-subscription accounts.</inlineHelpText>
        <label>XXXReason for Cancellation</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Lack of Payment</fullName>
                    <default>false</default>
                    <label>Lack of Payment</label>
                </value>
                <value>
                    <fullName>Utility Account Cancelled</fullName>
                    <default>false</default>
                    <label>Utility Account Cancelled</label>
                </value>
                <value>
                    <fullName>Customer Request</fullName>
                    <default>false</default>
                    <label>Customer Request</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>SSS_Id__c</fullName>
        <externalId>false</externalId>
        <formula>IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,
Shared_Solar_System__c,
Opportunity__r.Shared_Solar_System__c
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>SSS Id</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Sales_Person__c</fullName>
        <externalId>false</externalId>
        <formula>Opportunity__r.BS_Sales_ID__r.Name</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Sales Person</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Service_Address_From_Log__c</fullName>
        <externalId>false</externalId>
        <formula>Utility_Account_Log__r.Service_Address__c &amp; Utility_Account_Log__r.Service_Apt_Suite__c &amp;&quot;, &quot;&amp; Utility_Account_Log__r.Service_City__c &amp;&quot; &quot;&amp; Utility_Account_Log__r.Service_State__c &amp;&quot; &quot;&amp;  Utility_Account_Log__r.Service_Zip_Code__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>Equals Utility Account Log Service Address</inlineHelpText>
        <label>Service Address (From Log)</label>
        <required>false</required>
        <securityClassification>Restricted</securityClassification>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Share_of_System__c</fullName>
        <externalId>false</externalId>
        <formula>Customer_Subscription_KW_DC_STATIC__c /  Opportunity__r.Shared_Solar_System__r.Total_System_Size_kWh_DC__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Current Share of System</label>
        <precision>18</precision>
        <required>false</required>
        <scale>5</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Percent</type>
    </fields>
    <fields>
        <fullName>Shared_Solar_System_Name__c</fullName>
        <externalId>false</externalId>
        <formula>IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,
Shared_Solar_System__r.Name,
Opportunity__r.Shared_Solar_System_Name__c
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Shared Solar System Name</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Shared_Solar_System__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>This is the SSS on the Opportunity when the UAS was created. The SSS on an existing UAS should never be changed.</description>
        <externalId>false</externalId>
        <inlineHelpText>This is the SSS on the Opportunity when the UAS was created. The SSS on an existing UAS should never be changed.</inlineHelpText>
        <label>Shared Solar System</label>
        <referenceTo>Shared_Solar_System__c</referenceTo>
        <relationshipLabel>Utility Account Subscriptions</relationshipLabel>
        <relationshipName>Utility_Account_Subscriptions</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Status__c</fullName>
        <description>This is displayed in the customer portal as a way of showing the status of a customer&apos;s subscription using a combination of Current Allocation Schedule Status, Next Allocation Schedule Status, and Date Removed</description>
        <externalId>false</externalId>
        <formula>IF(
 ISBLANK(Date_Removed_from_Project__c)=false,
&quot;Inactive&quot;,

IF(

  ISPICKVAL(Next_Schedule_Z_Status__c,&quot;Active Subscription&quot;)
&amp;&amp;
 Current_Schedule_Z_Status__c=&quot;Not Yet Enacted&quot;,
&quot;Coming Soon&quot;,

IF(
  ISPICKVAL(Next_Schedule_Z_Status__c,&quot;Active Subscription&quot;)
&amp;&amp;
 Current_Schedule_Z_Status__c=&quot;Enacted&quot;,
&quot;Active&quot;,

IF(
  ISPICKVAL(Next_Schedule_Z_Status__c,&quot;Inactive Subscription&quot;)
&amp;&amp;
 Current_Schedule_Z_Status__c=&quot;Enacted&quot;,
&quot;Pending Removal&quot;,&quot;&quot;)


)
)
)</formula>
        <inlineHelpText>This is displayed in the customer portal as a way of showing the status of a customer&apos;s subscription using a combination of Current Allocation Schedule Status, Next Allocation Schedule Status, and Date Removed</inlineHelpText>
        <label>Status</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Subscribed_Annual_Cost_of_Electricity__c</fullName>
        <description>Used for SREC CS contracts. Check the Subscription Type to see if this fields should be used. It is used to calculate the future customer subscription kW DC field for Opportunities with the SREC CS Product. It is populated manually.</description>
        <externalId>false</externalId>
        <inlineHelpText>Used for SREC CS contracts. Check the Subscription Type to see if this fields should be used. It is used to calculate the future customer subscription kW DC field for Opportunities with the SREC CS Product. It is populated manually.</inlineHelpText>
        <label>Annual Cost of Electricity (Future)</label>
        <precision>16</precision>
        <required>false</required>
        <scale>6</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Subscribed_NMC_Allocation_kWh__c</fullName>
        <externalId>false</externalId>
        <formula>IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true
,
Future_Customer_Subscription_KWDC_Rollup__c
,
Customer_Subscription_KW_DC__c
)
 *  
IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,
Shared_Solar_System__r.Expected_Yield_kWh_kW__c,
Opportunity__r.Shared_Solar_System__r.Expected_Yield_kWh_kW__c
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>NMC Allocation (kWh)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Subscription_Comment_c__c</fullName>
        <externalId>false</externalId>
        <label>Subscription Comment</label>
        <length>255</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Subscription_Rate_Plan_Charge__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>Link between SF subscription and Zuora Subscription. There will be 1 Subscription Rate Plan Charge record for every customer, project and client combination (one Subscription Rate Plan Charge can have multiple UASes)</description>
        <externalId>false</externalId>
        <label>Subscription Rate Plan Charge</label>
        <referenceTo>Zuora__SubscriptionProductCharge__c</referenceTo>
        <relationshipLabel>Utility Account Subscriptions (Subscription Rate Plan Charge)</relationshipLabel>
        <relationshipName>Utility_Account_Subscriptions1</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Subscription_Type__c</fullName>
        <description>This is the Customer Subscription Type field from the Product assigned to the Opportunity the UAS is for. It determines if the UAS should use the Annual kWh of Annual Cost fields for sizing, and is used by a validation rule to prevent the wrong sizing fields from being used.</description>
        <externalId>false</externalId>
        <formula>TEXT(Opportunity__r.Product__r.Customer_Subscription_Type__c)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>This is the Customer Subscription Type field from the Product assigned to the Opportunity the UAS is for. Determines if the Annual kWh or the Annual Cost fields should be used, and is used by a validation rule to prevent usage of the wrong sizing fields.</inlineHelpText>
        <label>Subscription Type</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Total_Count_of_Schedule_Zs__c</fullName>
        <externalId>false</externalId>
        <label>Total Count of Allocation Schedules</label>
        <summaryForeignKey>Schedule_Z_Subscription__c.Utility_Account_Subscription__c</summaryForeignKey>
        <summaryOperation>count</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Transferred_From__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>This is the lookup to the Subscription Transfer that is used to relate the newly created UAS to the Subscription Transfer that created it.</description>
        <externalId>false</externalId>
        <inlineHelpText>This should be populated when a new UAS is created from a Subscription Transfer.  There should usually be one UAS created by a single Subscription Transfer unless a UAS is being split into multiple new UASs.</inlineHelpText>
        <label>Transferred From</label>
        <referenceTo>Subscription_Transfer__c</referenceTo>
        <relationshipLabel>Transferred to UASs</relationshipLabel>
        <relationshipName>Utility_Account_Subscriptions1</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Transferred_To__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>This is the lookup to the transfer object which relates to both this UAS and the UAS that is replacing it.</description>
        <externalId>false</externalId>
        <inlineHelpText>This should be populated when a UAS is transferred to a new one via Subscription Transfer.  You should typically make a new transfer for each UAS that is being transferred unless they are being combined.</inlineHelpText>
        <label>Transferred To</label>
        <referenceTo>Subscription_Transfer__c</referenceTo>
        <relationshipLabel>Transferred From UASs</relationshipLabel>
        <relationshipName>Utility_Account_Subscriptions</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Transferring_Subsc_to_Another_UAS__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Transferring Subsc. to Another UAS</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Trigger_Tester__c</fullName>
        <externalId>false</externalId>
        <label>Trigger Tester</label>
        <precision>12</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UAS_Number__c</fullName>
        <externalId>false</externalId>
        <label>UAS Number</label>
        <precision>3</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Unlock_Password__c</fullName>
        <externalId>false</externalId>
        <label>Unlock Password</label>
        <length>10</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Update_Dummy__c</fullName>
        <defaultValue>false</defaultValue>
        <description>Field used to fire subscription dilution trigger - fired by Process Builder</description>
        <externalId>false</externalId>
        <label>Update Dummy</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Utility_Account_Log_Name__c</fullName>
        <description>Used in the UAS display flow on cases</description>
        <externalId>false</externalId>
        <formula>Utility_Account_Log__r.Name</formula>
        <label>Utility Account Log Name</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Utility_Account_Log__c</fullName>
        <externalId>false</externalId>
        <label>Utility Account Log</label>
        <referenceTo>Utility_Account_Log__c</referenceTo>
        <relationshipLabel>Utility Account Subscriptions</relationshipLabel>
        <relationshipName>Utility_Account_Subscriptions</relationshipName>
        <relationshipOrder>0</relationshipOrder>
        <reparentableMasterDetail>true</reparentableMasterDetail>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>MasterDetail</type>
        <writeRequiresMasterRead>false</writeRequiresMasterRead>
    </fields>
    <fields>
        <fullName>Utility__c</fullName>
        <externalId>false</externalId>
        <formula>Opportunity__r.UtilityMapper__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Utility</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>calculated_annual_cost_of_electricity__c</fullName>
        <defaultValue>0</defaultValue>
        <description>The Minimum of Total UAL Cost and Maximum SSS Cost. (As more UAS are created, UAL Cost is deducted)</description>
        <externalId>false</externalId>
        <label>Calculated Annual Cost of Electricity</label>
        <precision>10</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>kW_Allocation__c</fullName>
        <description>This field multiplies the ROUNDED Future Shared of System by the System Size in kW DC.</description>
        <externalId>false</externalId>
        <formula>IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true
,
 Future_Share_of_System_Rollup__c
,
 Future_Share_of_System__c)
* 
IF(
$CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true
,
Shared_Solar_System__r.Total_System_Size_kWh_DC__c
,
Opportunity__r.Shared_Solar_System__r.Total_System_Size_kWh_DC__c
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>kW size based on % subscription on allocation schedule</inlineHelpText>
        <label>kW Allocation</label>
        <precision>18</precision>
        <required>false</required>
        <scale>6</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <label>Utility Account Subscription</label>
    <listViews>
        <fullName>Customer_Community_List_Community_Solar_Subscriptions</fullName>
        <columns>NAME</columns>
        <columns>Status__c</columns>
        <columns>Shared_Solar_System_Name__c</columns>
        <columns>Estimated_Annual_Subscription_kWh__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>Next_Schedule_Z_Status__c</field>
            <operation>equals</operation>
            <value>Active Subscription</value>
        </filters>
        <label>Community Solar Subscriptions</label>
        <sharedTo>
            <group>All_Communities_Users</group>
        </sharedTo>
    </listViews>
    <nameField>
        <label>Utility Account Number</label>
        <trackHistory>false</trackHistory>
        <type>Text</type>
    </nameField>
    <pluralLabel>Utility Account Subscriptions</pluralLabel>
    <recordTypeTrackHistory>false</recordTypeTrackHistory>
    <recordTypes>
        <fullName>Utility_Account_Subscription_Editable</fullName>
        <active>true</active>
        <label>Utility Account Subscription Editable</label>
        <picklistValues>
            <picklist>Next_Schedule_Z_Status__c</picklist>
            <values>
                <fullName>Active Subscription</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Inactive Subscription</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Project_Company__c</picklist>
            <values>
                <fullName>Fairhaven Mill Rd%3A BWC Origination Fairhaven One%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Hopedale S Main St%3A BWC Origination 19 LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mendon Milford St%3A BWC Mystic River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mendon Providence%2C Thayer and Bates %3A BWC Wading River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Oxford Barrett P1%3A BWC Stillwater River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Oxford Barrett P2%3A BWC French River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Oxford Clara Barton%3A BWC Fivemile River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Plympton%3A BWC Bluefish River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Sturbridge Hare Rd%3A BWC Originations 8 LLC</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Reason_for_Cancellation__c</picklist>
            <values>
                <fullName>Customer Request</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Lack of Payment</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Utility Account Cancelled</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>Utility_Account_Subscription_on_Schedule_Z</fullName>
        <active>true</active>
        <label>Utility Account Subscription on Schedule Z</label>
        <picklistValues>
            <picklist>Next_Schedule_Z_Status__c</picklist>
            <values>
                <fullName>Active Subscription</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Inactive Subscription</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Project_Company__c</picklist>
            <values>
                <fullName>Fairhaven Mill Rd%3A BWC Origination Fairhaven One%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Hopedale S Main St%3A BWC Origination 19 LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mendon Milford St%3A BWC Mystic River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mendon Providence%2C Thayer and Bates %3A BWC Wading River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Oxford Barrett P1%3A BWC Stillwater River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Oxford Barrett P2%3A BWC French River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Oxford Clara Barton%3A BWC Fivemile River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Plympton%3A BWC Bluefish River%2C LLC</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Sturbridge Hare Rd%3A BWC Originations 8 LLC</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Reason_for_Cancellation__c</picklist>
            <values>
                <fullName>Customer Request</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Lack of Payment</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Utility Account Cancelled</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <searchLayouts>
        <lookupDialogsAdditionalFields>Shared_Solar_System_Name__c</lookupDialogsAdditionalFields>
    </searchLayouts>
    <sharingModel>ControlledByParent</sharingModel>
    <validationRules>
        <fullName>Lock_Project_Company_Field</fullName>
        <active>true</active>
        <description>Restricts users who can edit project co field once it has already been updated to principals only</description>
        <errorConditionFormula>AND(
 NOT(TEXT(PRIORVALUE(Project_Company__c)) = null),
 NOT(ISNEW()), 
 NOT(ISCLONE()),
 ISCHANGED(Project_Company__c), 
 NOT(OR(
  $UserRole.Id = &quot;00E0a000000Nd2M&quot;,
  $UserRole.Id = &quot;00E0a000000Nd2N&quot;,
  $UserRole.Id = &quot;00E0a000000Nd2L&quot;))
)</errorConditionFormula>
        <errorMessage>The Project Company field cannot be changed by this user. Please contact your System Administrator or a BlueWave Executive if you need to change the assignment of a contract to a Project Company.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Opportunity_and_SSS_Lock</fullName>
        <active>false</active>
        <errorConditionFormula>AND(

 $CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,

ISNEW()=false, /*does not apply to new records*/

OR(
   AND( ISCHANGED(Shared_Solar_System__c)=true,
        NOT(PRIORVALUE(Shared_Solar_System__c)=&quot;&quot;) /*prevent SSS changes once populated*/
),
   AND( ISCHANGED( Opportunity__c )=true,
        NOT(PRIORVALUE(Opportunity__c)=&quot;&quot;) /*prevent opp changes once populated*/
)
)
)</errorConditionFormula>
        <errorMessage>The Shared Solar System and Opportunity on a Utility Account Subscription cannot be changed. If you are trying to change the Shared Solar System, do so on the Opportunity.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Sizing_Control</fullName>
        <active>true</active>
        <description>This validation rule prevents a user from filling in the wrong sizing fields (kWh or Cost) on the UAS.</description>
        <errorConditionFormula>IF( $CustomMetadata.Custom_Feature_Enablement__mdt.Subscription_Orders.Feature_is_Enabled__c=true,
/*use SO rollup fields if SO feature is on*/

OR(
AND(
Subscription_Type__c=&quot;kWh&quot;,
ISCHANGED(Annual_Cost_Future_Rollup__c)=true,
ISBLANK(Annual_Cost_Future_Rollup__c)=false)
,
AND(
Subscription_Type__c=&quot;Electricity Cost ($)&quot;,
ISCHANGED(Annual_kWh_Subscription_Future_Rollup__c)=true,
ISBLANK(Annual_kWh_Subscription_Future_Rollup__c)=false)
) 
,

/*use non rollup fields if SO feature is not on*/
OR(
AND(
Subscription_Type__c=&quot;kWh&quot;,
ISCHANGED(Subscribed_Annual_Cost_of_Electricity__c)=true,
ISBLANK(Subscribed_Annual_Cost_of_Electricity__c)=false)
,
AND(
Subscription_Type__c=&quot;Electricity Cost ($)&quot;,
ISCHANGED(Annual_kwh_subscription_future__c)=true,
ISBLANK(Annual_kwh_subscription_future__c)=false)
)
)</errorConditionFormula>
        <errorMessage>You&apos;re using the wrong sizing fields. Look at the Subscription Type field. If it&apos;s kWh, use the Annual kWh sizing fields. If it&apos;s Electricity Cost ($), use the Annual Cost sizing fields. The subscription type is set by the Product on the Opportunity.</errorMessage>
    </validationRules>
    <visibility>Public</visibility>
    <webLinks>
        <fullName>New_Customer_Care_Case</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <encodingKey>UTF-8</encodingKey>
        <hasMenubar>false</hasMenubar>
        <hasScrollbars>true</hasScrollbars>
        <hasToolbar>false</hasToolbar>
        <height>600</height>
        <isResizable>true</isResizable>
        <linkType>url</linkType>
        <masterLabel>New Customer Care Case</masterLabel>
        <openType>newWindow</openType>
        <position>none</position>
        <protected>false</protected>
        <showsLocation>false</showsLocation>
        <showsStatus>false</showsStatus>
        <url>/500/e?&amp;RecordType=012j00000000HA8&amp;ent=Case&amp;cas14=Customer Care Case&amp;CF00Nj000000BVHR9_lkid={!Utility_Account_Subscription__c.Utility_Account_LogId__c}&amp;CF00Nj000000BVHR9={!Utility_Account_Subscription__c.Utility_Account_Log__c}&amp;CF00Nj000000ARyea_lktp={!Utility_Account_Subscription__c.OpportunityId__c}&amp;CF00Nj000000ARyea={!Utility_Account_Subscription__c.Opportunity__c}&amp;00Nj000000BVAYr=Utility Account Data Inaccurate or Missing&amp;cas11=Web</url>
    </webLinks>
    <webLinks>
        <fullName>New_Subscription_Order</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <encodingKey>UTF-8</encodingKey>
        <hasMenubar>false</hasMenubar>
        <hasScrollbars>true</hasScrollbars>
        <hasToolbar>false</hasToolbar>
        <height>600</height>
        <isResizable>true</isResizable>
        <linkType>url</linkType>
        <masterLabel>New Subscription Order</masterLabel>
        <openType>newWindow</openType>
        <position>none</position>
        <protected>false</protected>
        <showsLocation>false</showsLocation>
        <showsStatus>false</showsStatus>
        <url>/flow/User_Subscription_Order_Creation?var_UASID={!Utility_Account_Subscription__c.Id}&amp;retURL={!Utility_Account_Subscription__c.Id}</url>
    </webLinks>
</CustomObject>