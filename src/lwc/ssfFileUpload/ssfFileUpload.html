<template>
    <div style="width: 100%;" class="slds-var-m-bottom_small">
        <template if:false={success}>
            <div class="fileUploadWithHelp">
                <lightning-file-upload
                    label={inputText}
                    name="fileUploader"
                    accept={acceptedFileTypes}
                    record-id={recordId}
                    onuploadfinished={handleUploadFinished}
                    multiple>
                </lightning-file-upload>
                <template if:false={isPhone}>
                    <template if:true={hasHelpText}>
                        <div class="help-icon" title="Click here for more information" onclick={toggleHelp}>
                            <svg class="help-button__icon" aria-hidden="true">
                                <use xlink:href="/_slds/icons/action-sprite/svg/symbols.svg#question_post_action"></use>
                            </svg>
                            <span class="slds-assistive-text">Click here for more information</span>
                        </div>
                        <template if:true={helpTextVisible}>
                            <div class="tooltip" role="tooltip" id="help">
                                <div class="slds-popover__body tooltip_text">
                                    <slot></slot>
                                </div>
                            </div>
                        </template>
                    </template>
                </template>
            </div> 
            <template if:true={isError}>
                <div data-help-message="true" role="alert" class="slds-form-element__help slds-text-color_error">
                    <p class="small">You must upload your {categoryType} before proceeding.</p>
                </div>
            </template>
            <template if:true={isPhone}>
                <template if:true={hasHelpText}>
                    <div class="slds-text-align_right">
                        <lightning-button
                            label="[more info]"
                            variant="base"
                            onclick={toggleHelp}>
                        </lightning-button>
                        <div if:true={helpTextVisible} class="slds-text-align_left">
                            <slot></slot>
                        </div>
                    </div>
                </template>
            </template>
        </template>
        <template if:true={success}>
            <div class="slds-var-m-around_small">
                <lightning-icon 
                    icon-name="utility:success"
                    variant="success"
                    size="x-small"
                    alternative-text="upload successful"
                    class="slds-var-m-right_x-small">
                </lightning-icon>
                <span><p>{inputText}</p></span>
            </div>
        </template>
        <c-bluewave-spinner spinner-message={spinnerMessage} show={showSpinner}></c-bluewave-spinner>
    </div>
</template>