/**
 * Created by IsraelScottGrogin on 9/23/2020.
 */

public without sharing class CaseSelector {
    public List<String> apiCaseFields = new List<String>{
        'Account_Name__c',
        'Account_Number__c',
        'AccountId',
        'Adjusted_Time_to_Close__c',
        'agf__ADM_Work__c',
        'Am_I_the_case_contact__c',
        'AssetId',
        'Assignee_If_Different__c',
        'BusinessHoursId',
        'Case_Alert_Details__c',
        'Case_Alert_Status__c',
        'Case_Alerts__c',
        'Case_Alerts_Text__c',
        'Case_Detail__c',
        'Case_Type__c',
        'Case_Update__c',
        'CaseNumber',
        'Category__c',
        'Chargent_Order__c',
        'ClosedDate',
        'Comments',
        'Complaint_Description__c',
        'ContactEmail',
        'ContactFax',
        'ContactId',
        'ContactMobile',
        'ContactPhone',
        'Created_From_Task__c',
        'CreatedById',
        'CreatedDate',
        'Deadline__c',
        'Deal__c',
        'Description',
        'Details__c',
        'Disable_Followup_Email__c',
        'Email__c',
        'Error_Log__c',
        'Expand__c',
        'Finance_Category__c',
        'First_Name__c',
        'First_Response_Age__c',
        'First_Response_Date_Time__c',
        'Forwarded_Email_Count__c',
        'How_Can_We_Help__c',
        'Id',
        'IsClosed',
        'IsClosedOnCreate',
        'IsDeleted',
        'IsEscalated',
        'Language',
        'Last_Name__c',
        'LastModifiedById',
        'LastModifiedDate',
        'LastReferencedDate',
        'LastViewedDate',
        'Lead_Lookup__c',
        'Link_to_Case__c',
        'MasterRecordId',
        'New_Email_Count__c',
        'of_Calls__c',
        'of_Emails__c',
        'of_Letters__c',
        'of_SMS__c',
        'Origin',
        'OwnerId',
        'ParentId',
        'Pending_Reply__c',
        'Permission_Set_Expiration_Date_Time__c',
        'Permission_Set_ID__c',
        'Power_of_One__c',
        'Primary_Complaint_Category__c',
        'Priority',
        'Product_Line__c',
        'Product_Line_Account__c',
        'Product_tag__c',
        'Production_Update__c',
        'QC_Case_Subject__c',
        'Read_Email_Count__c',
        'Reason',
        'RecordTypeId',
        'Recurring_Billing__c',
        'Related_Opportunity__c',
        'Related_Utility_Account_Log__c',
        'Replied_Email_Count__c',
        'Resolution__c',
        'Root_Cause__c',
        'Round_Robin_Queue__c',
        'Round_Robin_Queue_Position__c',
        'Sale_Status__c',
        'Sent_Email_Count__c',
        'Shared_Solar_System__c',
        'Shared_with_Client__c',
        'Skip_Round_Robin__c',
        'SourceId',
        'Status',
        'Subject',
        'SuppliedCompany',
        'SuppliedEmail',
        'SuppliedName',
        'SuppliedPhone',
        'Survey_URL__c',
        'SystemModstamp',
        'Time_to_Close__c',
        'Transfer__c',
        'Type',
        'Unread_Messages__c',
        'Utility_Follow_Up_Required__c',
        'Zuora_Payment_Method__c'
    };
    public List<Case> selectOpenCasesFromLeadId(Id lead){
        String query = 'SELECT ' + String.join(apiCaseFields, ', ')+' FROM Case' + ' WHERE Lead_Lookup__c =: lead' +
        ' AND IsClosed = false';
        return Database.query(String.escapeSingleQuotes(query));
    }
}