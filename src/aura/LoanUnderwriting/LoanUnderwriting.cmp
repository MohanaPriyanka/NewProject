<aura:component controller="LoanUnderwriting">
  <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
  <aura:attribute name="leadId" type="String"/>
  <aura:attribute name="loanInfo" type="Lead"/>
  <h1 class="slds-page-header__title slds-align_absolute-center slds-border_bottom" title="Customer Name"><ui:outputText value="{!v.loanInfo.Name}"/></h1>
  <table class="slds-border_bottom slds-m-top_xx-small slds-m-bottom_xx-small" border="0">
    <tr>
      <td width="33%">
        <div class="slds-align_absolute-center">
          <b>Product: &nbsp; </b> <ui:outputText value="{!v.loanInfo.Product__r.ProductCode}"/>
        </div>
      </td>      
      <td width="33%">
        <div class="slds-align_absolute-center">
          <b>Min FICO: &nbsp;</b> <ui:outputText value="{!v.loanInfo.Product__r.Credit_Minimum__c}"/>
        </div>
      </td>
      <td width="33%">
        <div class="slds-align_absolute-center">
          <b> Max DTI: &nbsp;</b> <ui:outputText value="{!v.loanInfo.Product__r.Debt_To_Income_Maximum__c}"/>%
        </div>
      </td>
    </tr>
  </table>
  <b><h3 class="slds-page-header__title slds-m-left_xx-small slds-m-top_x-small slds-align_absolute-center" title="Customer Name">Approval Status</h3></b>
  <table class="slds-border_bottom slds-m-top_xx-small slds-m-bottom_xx-small " border="0">
    <tr>
      <td width="33%">
        <div class="slds-align_absolute-center">
          <b>Approval Status: &nbsp; </b> <ui:outputText value="Qualified"/>
        </div>
      </td>      
      <td width="33%">
        <div class="slds-align_absolute-center">
          <b>Avidia Review Status: &nbsp;</b> <ui:outputText value="Qualified"/>
        </div>
      </td>
      <td width="33%">
        <div class="slds-align_absolute-center">
          <b>Pre-Qual Status: &nbsp;</b> <ui:outputText value="Qualified"/>
        </div>
      </td>
    </tr>
  </table>
  <br></br>
  <br></br>
  <br></br>
  <br></br>
  <br></br>
  <br></br>
  <br></br>
  <table border="0">
    <tr>
      <td width="33%">
        <div class="slds-align_absolute-center">
          <b>Solar Loan Approval Status: </b> 
        </div>
        <ui:outputText value="{!v.loanInfo.Product__r.Credit_Minimum__c}"/>
      </td>
      <td width="33%">
        <b> Max DTI: </b> <ui:outputText value="{!v.loanInfo.Product__r.Debt_To_Income_Maximum__c}"/>%
      </td>
    </tr>
  </table>


  <br></br>
  <b> Main Applicant:</b>
  <br></br>
  Personal Credit Report
  <br></br>
  <table border="1">
    <aura:iteration items="{!v.loanInfo.LASERCA__Personal_Credit_Reports__r}" var="pcrs" >
      <tr>  
        <td colspan="3">
          <ui:outputURL value="{!'/' + pcrs.Id}" label="{!pcrs.Name}" target="_blank"/>
        </td>
      </tr> 
      <tr>  
        <td colspan="3">
          FICO: <ui:outputText value="{!pcrs.LASERCA__Credit_Score_TransUnion__c}"/>
        </td>
      </tr> 
      <tr>  
        <td colspan="3">
          Adverse Credit Notices:
        </td>
      </tr> 
      <tr>  
        <td>
          <b>Code</b>
        </td>
        <td>
          <b>Detail</b>
        </td>
        <td>
          <b>Adverse Credit Notice</b>
        </td>
      </tr> 
      <tr>  
        <td>
          <ui:outputText value="{!pcrs.LASERCA__Code__c}"/>
        </td>
        <td>
          <ui:outputText value="{!pcrs.LASERCA__Detail_1__c}"/>
        </td>
        <td>
          <ui:outputText value="{!pcrs.Adverse_Credit_Notice_1__c}"/>
        </td>
      </tr> 
      <tr>  
        <td>
          <ui:outputText value="{!pcrs.LASERCA__Code_2__c}"/>
        </td>
        <td>
          <ui:outputText value="{!pcrs.LASERCA__Detail_2__c}"/>
        </td>
        <td>
          <ui:outputText value="{!pcrs.Adverse_Credit_Notice_2__c}"/>
        </td>
      </tr> 
      <tr>  
        <td>
          <ui:outputText value="{!pcrs.LASERCA__Code_3__c}"/>
        </td>
        <td>
          <ui:outputText value="{!pcrs.LASERCA__Detail_3__c}"/>
        </td>
        <td>
          <ui:outputText value="{!pcrs.Adverse_Credit_Notice_3__c}"/>
        </td>
      </tr> 
    </aura:iteration>    
  </table>

  <!-- 

       Add DTI table
    -->


  <br></br>
  Income Documentation:
  <table>
    <aura:iteration items="{!v.loanInfo.Attachments}" var="attachment" >
      <tr>  
        <td>
          <ui:outputURL value="{!'/servlet/servlet.FileDownload?file=' + attachment.Id}" label="{!attachment.Name}" target="_blank"/>
        </td>
      </tr> 
    </aura:iteration>    
  </table>
  <br></br>
  
</aura:component>
