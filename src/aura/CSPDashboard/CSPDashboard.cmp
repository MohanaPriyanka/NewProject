<aura:component implements="forceCommunity:availableForAllPageTypes" controller="MyAccountController">
  <aura:handler name="init" value="{!this}" action="{!c.doInit}" />  
  <aura:attribute name="myBill" type="Decimal"  />
  <aura:attribute name="userName" type="String"/>
  <aura:attribute name="mySavings" type="Decimal"  />
  <aura:attribute name="menuLabels" type="Account" />  
  <aura:attribute name="menuOpen" type="Boolean" default="false"/>
  <aura:attribute name="selectedAccount" type="String" default="All"/>      

  <div class="slds-form-element">
    <h3 class="slds-text-heading_large slds-p-bottom_small slds-align--absolute-center  slds-text-color_default"><b>Hello, {!v.userName}</b></h3>
    <h3 class="slds-text-title_caps slds-p-bottom_small slds-align--absolute-center"><b>My Community Solar Accounts:</b></h3>
    <div class="slds-form-element__control slds-align--absolute-center slds-size_1-of-2 slds-p-bottom_large">
      <aura:if isTrue="{!v.menuOpen}">
        <ui:menu>       
          <ui:menuList aura:id="MenuTable"
                       class="slds-dropdown_medium" 
                       visible="true"
                       closeOnClickOutside="false">
            <ui:actionMenuItem  label="All" 
                                click="{!c.accountMenuOutput}" 
                                disabled="false" 
                                class="All"
                                hideMenuAfterSelected="false" 
                                selected='true'/>
            <aura:iteration items="{!v.menuLabels}" var="menuLabel">
              <ui:actionMenuItem  aura:id="{!menuLabel.Id}" 
                                  label="{!menuLabel.Id}" 
                                  body="{!menuLabel.Name}" 
                                  class="{!menuLabel.Name}"
                                  click="{!c.accountMenuOutput}" 
                                  disabled="false"/>
            </aura:iteration> 
          </ui:menuList>
        </ui:menu>
        <aura:set attribute="else">
          <lightning:button variant="base" onclick="{!c.openMenu}">
            <div class="slds-text-heading_small slds-text-color_default">
              <lightning:icon class="slds-p-right_medium" iconName="utility:chevronright" size="x-small"/>
              {!v.selectedAccount}
            </div>
          </lightning:button>
        </aura:set>      
      </aura:if>           
    </div>
    <div class="slds-grid slds-gutters slds-grid_vertical-align-start slds-align--absolute-center">
      <div class="slds-col slds-size_1-of-4">
        <article class="slds-card">
          <div class="slds-card__header slds-grid">
            <header class="slds-media slds-has-flexi-truncate">
              <div class="slds-media__body">
                <h2>
                  <div class="slds-text-title_caps slds-align--absolute-center"><b>My Account</b></div>
                  <div class="slds-text-heading_medium slds-align--absolute-center slds-p-top_medium">My Balance</div>
                  <div class="slds-text-heading_large slds-align--absolute-center slds-p-top_small slds-text-color_default">
                    <b><ui:outputCurrency value="{!v.myBill}"/></b>
                  </div>
                </h2>
              </div>
            </header>
          </div>
          <footer class="slds-card__footer">
            <lightning:button aura:id="myaccount"
                              name="myaccount"
                              label="Pay My Bill"
                              onclick="{!c.navigateToURL}"
                              class="slds-text-body_small slds-button--brand slds-align--absolute-center"/>
          </footer>
        </article>
      </div>
      <div class="slds-col slds-size_1-of-4">
        <article class="slds-card">
          <div class="slds-card__header slds-grid">
            <header class="slds-media slds-has-flexi-truncate">
              <div class="slds-media__body">
                <h2>
                  <div class="slds-text-title_caps slds-align--absolute-center"><b>My Solar</b></div>
                  <div class="slds-text-heading_medium slds-align--absolute-center slds-p-top_medium">My Savings</div>
                  <div class="slds-text-heading_large slds-align--absolute-center slds-p-top_small slds-text-color_default">
                    <b><ui:outputCurrency value="{!v.mySavings}"/></b>
                  </div>
                </h2>
              </div>
            </header>
          </div>
          <footer class="slds-card__footer">
            <lightning:button aura:id="mysolar"
                              name="mysolar"
                              label="View My Savings"
                              onclick="{!c.navigateToURL}"
                              class="slds-text-body_small slds-button--brand slds-align--absolute-center"/>
          </footer>
        </article>
      </div>
    </div>
  </div>
</aura:component>