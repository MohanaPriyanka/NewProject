<aura:component implements="forceCommunity:availableForAllPageTypes" controller="SLPCustomerHandler" access="global">
    <aura:attribute name="loanList" type="Object"  /> 
    <aura:attribute name="customer" type="Object"  />
    <aura:attribute name="customerInformation" type="Object" />
	  <aura:attribute name="customerDates" type="String" />
    <aura:attribute name="taskType" type="String" access="global" />
    <aura:attribute name="parentSubTaskButton" type="Boolean"  />
    <aura:attribute name="licenseType" type="Boolean"  />      
    <aura:attribute name="partnerTaskList" type="Object"  />
    <aura:attribute name="parentSubTaskList" type="Object"  /> 
    <aura:attribute name="subTaskList" type="Object"  />
    <aura:attribute name="dateToggle" type="Boolean"  />
    <aura:attribute name="customerWindowLoanList" type="Object"  /> 
    <aura:attribute name="customerWindowTaskList" type="Object"  />  
	  <aura:attribute name="taskMap" type="Map"  />      
    <aura:attribute name="completeDisbursalList" type="Object"  />
    <aura:attribute name="incompleteDisbursalList" type="Object"  />    
    <aura:attribute name="taskViewButtonToggle" type="Boolean"  />
    <aura:attribute name="blueWaveReviewAlert" type="Boolean"  />     
	  <aura:registerEvent name="customerEvent" type="c:SLPCustomerEvent"/>    
    <aura:handler event="c:SLPDashboardEvent" action="{!c.openCustomerWindow}" />
    <aura:handler event="c:SLPAllCustomersEvent" action="{!c.openCustomerWindow}" />      
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />  
 	  <aura:handler name="change" value="{!v.customerInformation}" action="{!c.fieldChanges}"/>    
    
  <aura:attribute name="equipmentUpdate" type="Residential_Equipment__c" 
    default="{ 'sobjectType' : 'Residential_Equipment__c',
                 'Name': 'Cole',
             	   'Generator_Nameplate_Capacity__c': '',
                 'Type_of_Module__c': '',
                 'Number_of_Modules__c': '',
                 'Module_Manufacturer__c': '',
                 'Module_Model_Number__c':'',
                 'Type_of_Inverter__c': '',
                 'Number_of_Inverters__c': '',
                 'Inverter_Manufacturer__c': '',
                 'Inverter_Model_Number__c': '',
                 'Mechanical_Installation_Date__c': '',
                 'Interconnection_Date__c': '',
             	   'Mechanically_Installed__c': '',
             	   'Interconnected__c':'',
             }"/>
    <aura:attribute name="loanUpdate" type="Loan__c" 
    default="{ 'sobjectType' : 'Loan__c',
                 'Commencement_Datee__c': '',
             	   'System_Costt__c':'',
             }"/>      
     
<!-- main issues inclue the ability to break out subTasks within the task table. The tasks break out for each task with subTasks, filtering them by 
task type has been proven difficult due to sequence of the attribute's value after the loading of the subTasks and lock up of functionality 
when task is selected that doesn't equal the hard-coded value of task type. <Span> is also a solution that solves the framework error for 
accessing the attribute when unaccessible (this is a framework error) however it throws off the whole chart. The other issue is with regards to the 
view and canacel button. There is a rendering issue with making them dissapear and appear correctly. It only occurs when the task list is 
reloaded by clicking the view button on the dashboard page-->   
    
    <style>
        @font-face {
        font-family: proximaNovaFont;
        src: url('{!$Resource.ProximaNova}');
        }
        .proximaNova95 {
            font-family: proximaNovaFont;   
     		font-size:95%;
      		color: #FFFFFF;
        }

        @font-face {
        font-family: proximaNovaFont;
        src: url('{!$Resource.ProximaNova}');
        }
        .proximaNovaBrand {
            font-family: proximaNovaFont;   
        font-size:32px;
          color: #236192;
        }   

        @font-face {
        font-family: proximaNovaFont;
        src: url('{!$Resource.ProximaNova}');
        }
        .proximaNovaDataGreenSmall {
            font-family: proximaNovaFont;   
        font-size:100%;
          color: #32CD32;
        }

        @font-face {
        font-family: proximaNovaFont;
        src: url('{!$Resource.ProximaNova}');
        }
        .proximaNovaDataGreenSmall {
            font-family: proximaNovaFont;   
        font-size:100%;
          color: #32CD32;
        }

        @font-face {
        font-family: proximaNovaFont;
        src: url('{!$Resource.ProximaNova}');
        }
        .proximaNovaDataStream {
            font-family: proximaNovaFont;   
        font-size:100%;
          color: #00b2a9;
        }

        @font-face {
        font-family: proximaNovaFont;
        src: url('{!$Resource.ProximaNova}');
        }
        .proximaNovaDataBlue {
            font-family: proximaNovaFont;   
        font-size:90%;
          color: #266092;
        }  

    </style>
    
    <div aura:id = "customerPage" class="noDisplayBar"> 	
        <div aura:id="customerName" class="main2 proximaNovaBrand"> 
            <div  class="center proximaNovaBrand"><h1> {!v.customer.Loan__r.Name} </h1></div>
             <hr></hr>  
        </div>
        <br></br> 
          <!--  _________________________________PROGRESS BAR ___________________________________ -->   
        <div aura:id="taskBar" class="slds-wizard" role="navigation">    
          <ol class="slds-wizard__list">   
              <aura:iteration items="{!v.partnerTaskList}" var="task">    
              <aura:if isTrue="{!or(task.Status__c == 'Complete', task.Status__c == 'Pending')}">                  
                <li class="slds-wizard__item slds-is-active">
                      <span class="slds-wizard__marker "></span>
                      <span class="slds-wizard__label proximaNovaDataBlue slds-truncate" 
                            title="Navigation">{!task.Progress_Bar_Name__c}</span>
                  </li> 
                <aura:set attribute="else">      
                <li class="slds-wizard__item">
                      <span class="slds-wizard__marker "></span>
                      <span class="slds-wizard__label proximaNovaDataBlue slds-truncate" 
                            title="Navigation">{!task.Progress_Bar_Name__c}</span>
                </li>    
                </aura:set>
              </aura:if>               
              </aura:iteration>                                        
              </ol>
              <span class="slds-wizard__progress">
                <span aura:id="progressBar" class="slds-wizard__progress-bar"></span>
              </span>
            </div>
      	<div>
        <br></br>
        <br></br>
        <!--  _________________________________CUSTOMER INFO HEADER ___________________________________ -->                
        <table class="slds-table slds-table--bordered  slds-table--striped box">
          <thead>
            <tr class="slds-text-heading--label  proximaNovaDataBlue" >           
              <th scope="col"><span class="slds-truncate"><b>Partner</b></span></th>
              <th scope="col"><span class="slds-truncate"><b>Sales Agent</b></span></th>
              <th scope="col"><span class="slds-truncate"><b>Product</b></span></th>
              <th scope="col"><span class="slds-truncate"><b>System Cost</b></span></th>
              <aura:if isTrue="{!v.licenseType}">
                <th scope="col"><span class="slds-truncate"><b>Funded</b></span></th>
              </aura:if>
            </tr>
          </thead>
          <tbody>
              <tr>
                <th scope="row"> <b>{!v.customer.Loan__r.Partner__r.Name}</b> </th>
                <th scope="row"> <b>{!v.customer.Loan__r.Sales_Agent__r.Name}</b> </th>    
                <th scope="row"> <b>{!v.customer.Loan__r.Product__r.ProductCode}</b> </th>
                <th scope="row"> <ui:outputCurrency value="{!v.customer.Loan__r.System_Costt__c}" /></th> 
                <aura:if isTrue="{!v.licenseType}">   
                  <th scope="row"> <ui:outputCurrency class="proximaNovaDataStream" value="{!v.customer.Loan__r.Total_Funds_Disbursed__c}" /></th>
                </aura:if>                
              </tr>          
          </tbody>
        </table>  
        <br></br>      
        <!--  _________________________________INFORMATION BUTTONS ___________________________________ -->                
        <div aura:id = "customerInformationButtons" class="main2">        
            <br></br>
            <aura:if isTrue="{!v.licenseType}">  
            <div class="clearfix">               
                <div class="boxLeftExec">
                           <ui:button aura:id="taskInformationButton"
                               class="slds-button--brand box slds-align--absolute-center"
                               labelClass="proximaNova95"
                               label="View Task Information"                  
                               press="{!c.openTaskInformation}"/>                           
                </div>
                <div class="boxCenterExec">
                           <ui:button aura:id="customerInformationButton"
                               class="slds-button--brand box slds-align--absolute-center"
                               labelClass="proximaNova95"
                               label="View Customer Information"                  
                               press="{!c.openCustomerInformation}"/>                           
                </div>           
                <div class="boxRightExec">
                           <ui:button aura:id="disbursalInformationButton"
                               class="slds-button--brand box slds-align--absolute-center"
                               labelClass="proximaNova95"
                               label="View Disbursal Information"                  
                               press="{!c.openDisbursalInformation}"/>                           
                </div>
            </div>
            <aura:set attribute="else">
            <div class="clearfix">               
                <div class="boxLeftUser">
                           <ui:button aura:id="taskInformationButton"
                               class="slds-button--brand box slds-align--absolute-center"
                               labelClass="proximaNova95"
                               label="View Task Information"                  
                               press="{!c.openTaskInformation}"/>                           
                </div>
                <div class="boxRightUser">
                           <ui:button aura:id="customerInformationButton"
                               class="slds-button--brand box slds-align--absolute-center"
                               labelClass="proximaNova95"
                               label="View Customer Information"                  
                               press="{!c.openCustomerInformation}"/>                           
                </div>           
            </div>              
            </aura:set>  
            </aura:if>            
        </div>
        <hr></hr> 
        <aura:if isTrue="{!v.blueWaveReviewAlert}">
          <h3> In some cases, the review stage may require BlueWave to reach out to borrowers to obtain sensitive information. Please be aware that this may take longer than the other stages. You will be notified when it is completed.</h3>
          <br></br>
        </aura:if>
        <aura:if isTrue="{!v.customer.Loan__r.DOER_Solar_Loann__c}">    
          <div aura:id="cusomterInformationTextMSLP" class="noDisplay paddingBottom1">
            <h3>  
              All relevant customer information has been, or will be provided through the MCEC Technical Application. Please update this customer's income documentation if you have not already done so and submit your sales agreement with the customer 
            </h3>
          </div>
        </aura:if>                                           
        <!--  _________________________________CUSTOMER INFORMATION ___________________________________ -->                
        
        <div aura:id = "customerInformation1" class="box noDisplay"> 
            <br></br>
            <fieldset>
                <div class="clearfix main2"> 
                <div class="slds-form-element__group">
                  <div class="slds-form-element__row"> 
                      <div class="salesAgreementButtonRight">
                           <ui:button aura:id="salesAgreementButton"
                               class=" box slds-align--absolute-center"
                               labelClass=""
                               label="Submit Sales Agreement"                  
                               press="{!c.navigateSalesAgreementDoc}"/>                           
                      </div>                             
                      <div class="documentsButtonLeft">
                           <ui:button aura:id="incomeDocsButton"
                               class=" box slds-align--absolute-center"
                               labelClass=""
                               label="Submit Income Documentation"                  
                               press="{!c.navigateIncomeDocs}"/>                           
                      </div>                          
                  </div>
                </div> 
                </div>
                <br></br>
            </fieldset>
            <aura:if isTrue="{!v.customer.Loan__r.DOER_Solar_Loann__c == false}">                  
            <fieldset class="slds-form--compound paddingTop1x5">
              <div class="slds-form-element__group">
                <div class="slds-form-element__row">
                  <div class="slds-form-element slds-p-horizontal--small ">
                    <label class="slds-form-element__label" for="input-03">System Cost</label>
                    <ui:outputCurrency aura:id="systemCost" class="slds-input" value="{!v.customerInformation.Loan__r.System_Costt__c}"/>          
                    </div> 
                  <div class="slds-form-element slds-p-horizontal--small ">
                    <label class="slds-form-element__label" for="input-03">Principal Value</label>
                    <ui:outputCurrency aura:id="principalValue" class="slds-input" value="{!v.customerInformation.Loan__r.Principal__c}"/>          
                    </div>        
                </div>
                </div>
            </fieldset>          
            <fieldset class="slds-form--compound">
              <div class="slds-form-element__group">
                <div class="slds-form-element__row">
                  <div class="slds-form-element slds-p-horizontal--small">
                    <label class="slds-form-element__label" for="input-03">System Size</label>
                    <ui:inputNumber aura:id="systemSize" class="slds-input" value="{!v.equipmentUpdate.Generator_Nameplate_Capacity__c}" placeholder="{!v.customerInformation.Generator_Nameplate_Capacity__c}"/>          
                  </div>                    
                  <div class="slds-form-element slds-p-horizontal--small slds-grid--align-center ">
                    <label class="slds-form-element__label" for="input-03">Estimated Date of Completion</label>
                      <ui:inputDate aura:id="commencementDateChanger" 
                          class="slds-input" 
                          displayDatePicker="true"
                          value="{!v.customerInformation.Loan__r.Commencement_Datee__c}"                         
                      />       
                    </div>                     
                </div>
                </div>
            </fieldset>              
            <fieldset class="slds-form--compound">
              <div class="slds-form-element__group">
                <div class="slds-form-element__row">
                  <div class="slds-form-element slds-p-horizontal--small">
                    <label class="slds-form-element__label" for="input-03">Module Manufacturer</label>
                    <ui:inputText aura:id="moduleType" class="slds-input" value="{!v.equipmentUpdate.Module_Manufacturer__c}" placeholder="{!v.customerInformation.Module_Manufacturer__c}"/>          
                  </div>  
                  <div class="slds-form-element slds-p-horizontal--small">
                    <label class="slds-form-element__label" for="input-03">Module Model Number/Type</label>
                    <ui:inputText aura:id="moduleType" class="slds-input" value="{!v.equipmentUpdate.Module_Model_Number__c}" placeholder="{!v.customerInformation.Module_Model_Number__c}"/>          
                  </div>                                       
                  <div class="slds-form-element slds-p-horizontal--small">
                    <label class="slds-form-element__label" for="input-03">Number of Modules</label>
                    <ui:inputNumber aura:id="moduleNumber" class="slds-input" value="{!v.equipmentUpdate.Number_of_Modules__c}" placeholder="{!v.customerInformation.Number_of_Modules__c}" />          
                  </div>                     
                </div>
                </div>                 
            </fieldset>            
            <fieldset class="slds-form--compound">
              <div class="slds-form-element__group">
                <div class="slds-form-element__row">
                  <div class="slds-form-element slds-p-horizontal--small">
                    <label class="slds-form-element__label" for="input-03">Inverter Manufacturer</label>
                    <ui:inputText aura:id="moduleType" class="slds-input" value="{!v.equipmentUpdate.Inverter_Manufacturer__c}" placeholder="{!v.customerInformation.Inverter_Manufacturer__c}"/>          
                  </div>  
                  <div class="slds-form-element slds-p-horizontal--small">
                    <label class="slds-form-element__label" for="input-03">Inverter Model Number/Type</label>
                    <ui:inputText aura:id="moduleType" class="slds-input" value="{!v.equipmentUpdate.Inverter_Model_Number__c}" placeholder="{!v.customerInformation.Inverter_Model_Number__c}"/>          
                  </div>                        
                  <div class="slds-form-element slds-p-horizontal--small">
                    <label class="slds-form-element__label" for="input-03">Number of Inverters</label>
                    <ui:inputNumber aura:id="inverterNumber" class="slds-input" value="{!v.equipmentUpdate.Number_of_Inverters__c}" placeholder="{!v.customerInformation.Number_of_Inverters__c}" />          
                  </div>                  
                </div>
                </div>
            </fieldset>           
            <br></br>
              <div class="slds-align--absolute-center paddingBottom1 ">
                    <ui:spinner aura:id="emailSpinner" class="floatRight" isVisible="false"/>            
                    <ui:button aura:id="saveEquipment" label="Save" class="slds-button slds-button--brand " press="{!c.saveEquipmentInformation}"></ui:button>   
                    </div> 
            </aura:if>                       
            </div>
            <aura:if isTrue="{!v.customer.Loan__r.DOER_Solar_Loann__c == false}">
            <div aura:id = "customerInformation2" class="box noDisplay">                           
            <hr></hr>
            <fieldset class="slds-form--compound ">
              <br></br>
                <div class="slds-form-element__group">
                <div class="slds-form-element__row">
                  <div class="slds-form-element slds-p-horizontal--small slds-grid--align-center noDisplay">    
                  </div>              
                  <div class="slds-form-element slds-p-horizontal--small slds-grid--align-center ">
                    <label class="slds-form-element__label" for="input-03">Mechanical Installation Date</label>
                      <ui:inputDate aura:id="MechInstallDate" 
                          class="slds-input" 
                          displayDatePicker="true"
                          value="{!v.customerInformation.Mechanical_Installation_Date__c}"                         
                      />       
                    </div>

                      <div class="documentsButtonRight">
                           <ui:button aura:id="mechInstallDocsButton"
                               class=" box "
                               labelClass=""
                               label="Submit Installation Documentation"                  
                               press="{!c.navigateInstallationDocs}"/>                           
                      </div>                                            
                  </div>                         
                  <div class="slds-form-element__row">                     
                  <div class="slds-form-element slds-p-horizontal--small slds-grid--align-center ">
                    <label class="slds-form-element__label" for="input-03">Interconnection Date</label>
                      <ui:inputDate aura:id="interconnectionDateChanger" 
                          class="slds-input" 
                          displayDatePicker="true"
                          value="{!v.customerInformation.Interconnection_Date__c}"                         
                      />       
                    </div>  

                      <div class="documentsButtonRight">
                           <ui:button aura:id="interconnectDocsButton"
                               class=" box"
                               labelClass=""
                               label="Submit Interconnection Documentation"                  
                               press="{!c.navigateInterconnectionDocs}"/>                           
                      </div>                                           
                </div>
                </div>
                </fieldset>             
            	<div class="slds-align--absolute-center paddingBottom1 ">
                    <ui:button label="Save" class="slds-button slds-button--brand " press="{!c.saveEquipmentInformation}"></ui:button>
				</div>
        </div>
        </aura:if>   

            
        <!--  _________________________________TASK TABLE ___________________________________ -->    
        <table aura:id="taskTable" class="slds-table slds-table--bordered slds-table--striped  box ">
          <thead>
            <tr class="slds-text-heading--label " >
              <th scope="col"><span class="slds-truncate"><b>Task</b></span></th> 
              <th scope="col"><span class="slds-truncate"><b>Status</b></span></th>              
              <th scope="col"><span class="slds-truncate"><b>Completion Date</b></span></th>              
              <th scope="col"><span aura:id = "viewParentSubTasks" class="slds-truncate"><b>Sub-Tasks</b></span></th>
              </tr>
          </thead>
          <tbody>
 			    <aura:iteration items="{!v.partnerTaskList}" var="task">
            <tr>
              <th scope="row"> <b>{!task.Name}</b> </th> 
              <aura:if isTrue="{!task.Status__c == 'Pending'}">                                                                 
                <th scope="row" class="proximaNovaDataStream"> <b>{!task.Status__c}</b> </th>
                <aura:set attribute="else">
                  <th scope="row"> <b>{!task.Status__c}</b> </th>
                </aura:set>                             
              </aura:if>   
              <th scope="row"> <b>{!task.Completion_Date__c}</b> </th>
              <aura:if isTrue="{!task.SubTasks__c}"> 
                <th>                           
                 <ui:button aura:id="viewButton"
                   label="View"           
                   class=""
                   labelClass="{!task.Id}"          
                   press="{!c.openParentSubTasks}"/>
                   <ui:button aura:id="closeButton"        
                     label="Close"
                     class=""
                     labelClass="{!task.Id}"
                     press="{!c.exitParentSubTasks}"/>
                   </th>
                   <aura:set attribute="else">
                    <th>
                    </th>
                  </aura:set>                              
                </aura:if>              
                <aura:if isTrue="{!and(task.Name == 'Provide Sales Agreement', task.Status__c != 'Complete')}"> 
                 <th>                           
                  <ui:button aura:id="viewButton"
                    label="Submit"           
                    class=""
                    labelClass="{!task.Id}"          
                    press="{!c.navigateSalesAgreementDoc}"/>
                  </th>
                  <aura:set attribute="else">                    
                    <aura:if isTrue="{!task.Name == 'Mechanical Installation'}"> 
                      <th>                           
                       <ui:button aura:id="viewButton"
                         label="Submit"           
                         class=""
                         labelClass="{!task.Id}"          
                         press="{!c.navigateInstallationDocs}"/>
                       </th>
                       <aura:set attribute="else">
                        <aura:if isTrue="{!task.Name == 'Interconnection'}"> 
                          <th>                           
                           <ui:button aura:id="viewButton"
                             label="Submit"           
                             class=""
                             labelClass="{!task.Id}"          
                             press="{!c.openInterconnectionModal}"/>
                           </th>
                           <aura:set attribute="else">
                            <aura:if isTrue="{!task.Name == 'Provide All Customer Information'}"> 
                              <th>                           
                               <ui:button aura:id="viewButton"
                                 label="Submit"           
                                 class=""
                                 labelClass="{!task.Id}"          
                                 press="{!c.openCustomerInformation}"/>
                               </th>
                               <aura:set attribute="else">
                                <th>
                                  <ui:button disabled="true" />
                                </th>
                              </aura:set>                              
                            </aura:if>    
                          </aura:set>                              
                        </aura:if>     
                      </aura:set>                              
                    </aura:if>      
                  </aura:set>
                </aura:if>                                                                                          
              </tr>                                                                                            
            </aura:iteration>             
          </tbody>
        </table>
        <br></br>
        <!--  _________________________________SUB-TASK TABLE ___________________________________ -->                
        <!--<div aura:id="subTaskHeader" class="bwBluePaddingBelow noDisplay"><h3>Sub-Tasks - {!v.parentSubTaskList[0].Parent_Task__r.Name}</h3></div>    -->
		    <table aura:id="subTaskTable" class="slds-table slds-table--bordered slds-table--striped  box noDisplay">                
                      <thead>
                        <tr class="slds-text-heading--label " >
                          <th scope="col"><span class="slds-truncate"><b>Sub-Task</b></span></th> 
                          <th scope="col"><span class="slds-truncate"><b>Status</b></span></th>              
                          <th scope="col"><span class="slds-truncate"><b>Completion Date</b></span></th>              
                          <th scope="col"><span aura:id = "viewParentSubTasks" class="slds-truncate"><b>Sub-Tasks</b></span></th>
                          </tr>
                      </thead>
            		  <tbody>
            			<aura:iteration items="{!v.parentSubTaskList}" var="parentSubTask">
                            <tr>
                                <th scope="row" class="slds-text-align--left bwBlue"> <b>{!parentSubTask.Name}</b></th>                       
                                <th scope="row"> <b>{!parentSubTask.Status__c}</b> </th>
                                <th scope="row"> <b>{!parentSubTask.Completion_Date__c}</b> </th>
                        		<aura:if isTrue="{!parentSubTask.SubTasks__c}">                        
                            		<th>                           
                                       <ui:button aura:id="viewButtonParentSubTask"
                                           label="View"           
                                           class=""
                                           labelClass="{!parentSubTask.Id}"          
                                           press="{!c.openSubTasks}"/>
                                       <ui:button aura:id="closeButtonParentSubTask"        
                                           label="Close"
                                           class=""
                                           labelClass="{!parentSubTask.Id}"
                                           press="{!c.exitSubTasks}"/>
                            		</th>                                                          
                            	<aura:set attribute="else">
                                	<th>
                                    	<ui:button disabled="true" />
                                	</th>
                            	</aura:set> 
                    			</aura:if> 
                    	</tr>
						<aura:if isTrue="{!parentSubTask.SubTasks__c}">                
                            <aura:iteration items="{!v.subTaskList}" var="subTask">
                                <tr>
                                    <th scope="row" class="slds-text-align--left bwTeal"> <b>{!subTask.Name}</b></th>                       
                                    <th scope="row"> <b>{!subTask.Status__c}</b> </th>
                                    <th scope="row"> <b>{!subTask.Completion_Date__c}</b> </th>
                                    <th scope="row"></th>
                                </tr>                    
                            </aura:iteration>                     
           		 	</aura:if>                             
            		</aura:iteration>
            </tbody>
        </table>            
        </div>
        <aura:if isTrue="{!v.licenseType}">          
        <div>
        <br></br>  
        <!--  _________________________________DISBURSAL INFORMATION ___________________________________ -->       
        <div aura:id="completeDisbursals" class="bwBluePaddingBelow slds-scrollable noDisplay"><h3>Completed Disbursals</h3></div>                                               
        <table aura:id="disbursalCompleteTable" class="slds-table slds-table--bordered  slds-table--striped box noDisplay">
          <thead>
            <tr class="slds-text-heading--label " >
              <th scope="col"><span class="slds-truncate"><b>Disbursal</b></span></th>   
              <th scope="col"><span class="slds-truncate"><b>Amount</b></span></th>              
              <th scope="col"><span class="slds-truncate"><b>Status</b></span></th>
              <th scope="col"><span class="slds-truncate"><b>Date</b></span></th>                         
              </tr>
          </thead>
          <tbody>
 			    <aura:iteration items="{!v.completeDisbursalList}" var="disbursal">
              		<tr>
                		<th scope="row"> <b>{!disbursal.Name}</b> </th>
                    	<th scope="row"> <ui:outputCurrency class="proximaNovaDataStream" value="{!disbursal.Amount__c}" /></th>                          
                		<th scope="row"> <b>{!disbursal.Status__c}</b> </th>
                        <th scope="row"> <b>{!disbursal.Date_of_Disbursal__c}</b> </th>    
                  		<td> <div class="slds-form-element">
                    		<label class="slds-checkbox--toggle slds-grid">
                        		<ui:inputCheckBox aura:id="disbursalCheck" 
                                                  name="{!disbursal.Id}" 
                                                  value="{!disbursal.Partner_Confirmation__c}"
                                                  change="{!c.updateDisbursal}"/>
                        		<span id="toggle-desc" class="slds-checkbox--faux_container" aria-live="assertive">
                                <span class="slds-checkbox--faux"></span>
                                <span class="slds-checkbox--on">Confirmed</span>
                                <span class="slds-checkbox--off">Unconfirmed</span>
                        		</span>
                    		</label>
                    	</div>
                		</td>                        
                    </tr>                    
            </aura:iteration>          
          </tbody>
        </table> 
        <br></br>    
        <div aura:id="pendingDisbursals" class="bwBluePaddingBelow slds-scrollable noDisplay"><h3>Pending Disbursals</h3></div>                                
        <table aura:id="disbursalIncompleteTable" class="slds-table slds-table--bordered  slds-table--striped box noDisplay">
          <thead>
            <tr class="slds-text-heading--label " >
              <th scope="col"><span class="slds-truncate"><b>Disbursal</b></span></th>   
              <th scope="col"><span class="slds-truncate"><b>Amount</b></span></th>              
              <th scope="col"><span class="slds-truncate"><b>Status</b></span></th>                        
              </tr>
          </thead>
          <tbody>
 			    <aura:iteration items="{!v.incompleteDisbursalList}" var="disbursal">
              		<tr>
                		<th scope="row"> <b>{!disbursal.Name}</b> </th>
                    	<th scope="row"> <ui:outputCurrency class="proximaNovaDataStream" value="{!disbursal.Amount__c}" /></th>                          
                		<th scope="row"> <b>{!disbursal.Status__c}</b> </th>
                        <th scope="row"> <b>{!disbursal.Date_of_Disbursal__c}</b> </th>                          
                    </tr>                    
            </aura:iteration>          
          </tbody>
        </table>             
   	 </div>
     </aura:if>        
    	<div>
            <br></br>
            <button type="button" class="slds-button slds-button--brand" onclick="{! c.exitCustomerWindow }">Back</button>
    	</div>        
    </div> 
</aura:component>