<aura:component controller="CSAPController" access="global" extends="c:CSAPParent">
  <aura:set attribute="STAGENAME" value="NAV_Complete"/>
  <aura:handler event="c:CSAPNavigationEvent" action="{!c.handleNavEvent}"/>
  <aura:attribute name="loading" type="Boolean"/>
  <aura:attribute name="loadingText" type="String"/>
  <aura:attribute name="signingURL" type="String"/>

  <aura:if isTrue="{!v.loading}">
    <div class="slds-icon-eq slds-is-animated slds-align_absolute-center slds-p-top_medium" title="Loading">
      <div class="slds-icon-eq__bar"></div>
      <div class="slds-icon-eq__bar"></div>
      <div class="slds-icon-eq__bar"></div>
      <span class="slds-assistive-text">Loading</span>
    </div>
    <div class="slds-text-body--regular slds-align_absolute-center">
      {!v.loadingText}
    </div>
  </aura:if>

  <!--DocuSign Signature page-->
  <aura:if isTrue="{!v.page == 'ContractSignature'}">
      <div class="slds-p-bottom--medium slds-text-align--center slds-align--absolute-center slds-m-horizontal--xx-large">
        <iframe src="{!v.signingURL}" height="600px" width="100%" style="border:none;" id="docusignIframe"></iframe>
      </div>
  </aura:if>

  <!--Completed App Message-->
  <aura:if isTrue="{!v.page == 'Complete'}">
    <fieldset class="slds-box slds-theme--default slds-container_center slds-size--11-of-12 slds-large-size--2-of-3">
      <legend id="completeApplication" class="slds-text-heading--medium slds-p-vertical--medium slds-align_absolute-center">
        <b class="slds-p-horizontal_large"> Congratulations! </b>
      </legend>
      <div class="slds-p-bottom--medium slds-text-align--center slds-align--absolute-center slds-m-horizontal--xx-large">
        <b> Your Community Solar application is now complete!
        </b>
      </div>
      <div class="slds-p-bottom--medium slds-text-align--center slds-align--absolute-center slds-m-horizontal--xx-large">
        <b> Check your email for your contract! </b>
      </div>
    </fieldset>
  </aura:if>
</aura:component>