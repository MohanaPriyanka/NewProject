<?xml version="1.0" encoding="UTF-8"?>
<ruleset name="quickstart"
         xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd">
   <description>Quickstart configuration of PMD for Salesforce.com Apex. Includes the rules that are most likely to apply everywhere.</description>

   <!-- Performance -->
   <rule ref="category/apex/performance.xml/OperationWithLimitsInLoop" />

   <!-- Design -->
   <!--
   These three rules are the ones that Copado runs with. Uncomment them to see Copado's results.

   <rule ref="category/apex/design.xml/CyclomaticComplexity"/>
   <rule ref="category/apex/design.xml/StdCyclomaticComplexity"/>
   <rule ref="category/apex/design.xml/CognitiveComplexity"/>
   -->
   <!--
   These three rules have a lower threshold than the default to see if we're about to hit the default SCA limit.
   -->
   <rule ref="category/apex/design.xml/CyclomaticComplexity" message="The {0} {1} has a {2} cyclomatic complexity of {3} (Reporting >= 30, default >= 40)">
      <properties>
         <property name="classReportLevel" value="30" default="40"/>
         <property name="methodReportLevel" value="8" default="10"/>
      </properties>

   </rule>
   <rule ref="category/apex/design.xml/StdCyclomaticComplexity">
      <properties>
         <property name="reportLevel" value="8" default="10"/>
         <property name="showClassesComplexity" value="true" />
         <property name="showMethodsComplexity" value="true" />
      </properties>
   </rule>
   <rule ref="category/apex/design.xml/CognitiveComplexity" message="The {0} has a {2} cognitive complexity of {3} (Reporting >= 40, default >= 50)">
      <properties>
         <property name="classReportLevel" value="40" default="50" />
         <property name="methodReportLevel" value="10" default="15"/>
      </properties>
   </rule>

   <rule ref="category/apex/design.xml/AvoidDeeplyNestedIfStmts" deprecated="true" />
   <rule ref="category/apex/design.xml/ExcessiveClassLength" deprecated="true" />
   <rule ref="category/apex/design.xml/ExcessivePublicCount" deprecated="true" />
   <rule ref="category/apex/design.xml/NcssConstructorCount" deprecated="true" />
   <rule ref="category/apex/design.xml/NcssMethodCount" deprecated="true" />
   <rule ref="category/apex/design.xml/NcssTypeCount" deprecated="true" />
   <rule ref="category/apex/design.xml/TooManyFields" deprecated="true" />

   <!-- Security -->
   <rule ref="category/apex/security.xml/ApexBadCrypto" deprecated="true" />
   <rule ref="category/apex/security.xml/ApexCRUDViolation" deprecated="true" />
   <rule ref="category/apex/security.xml/ApexCSRF" deprecated="true" />
   <rule ref="category/apex/security.xml/ApexDangerousMethods" deprecated="true" />
   <rule ref="category/apex/security.xml/ApexInsecureEndpoint" deprecated="true" />
   <rule ref="category/apex/security.xml/ApexOpenRedirect" deprecated="true" />
   <rule ref="category/apex/security.xml/ApexSharingViolations" deprecated="true" />
   <rule ref="category/apex/security.xml/ApexSOQLInjection" deprecated="true" />
   <rule ref="category/apex/security.xml/ApexSuggestUsingNamedCred" deprecated="true" />
   <rule ref="category/apex/security.xml/ApexXSSFromEscapeFalse" deprecated="true" />
   <rule ref="category/apex/security.xml/ApexXSSFromURLParam" deprecated="true" />

   <!-- Style -->
   <rule ref="category/apex/codestyle.xml/ClassNamingConventions" deprecated="true" />
   <rule ref="category/apex/codestyle.xml/MethodNamingConventions" deprecated="true" />
   <rule ref="category/apex/codestyle.xml/VariableNamingConventions" deprecated="true" />
   <rule ref="category/apex/codestyle.xml/FieldDeclarationsShouldBeAtStart" />
   <rule ref="category/apex/codestyle.xml/ForLoopsMustUseBraces" deprecated="true" />
   <rule ref="category/apex/codestyle.xml/IfElseStmtsMustUseBraces" deprecated="true" />
   <rule ref="category/apex/codestyle.xml/IfStmtsMustUseBraces" deprecated="true" />
   <rule ref="category/apex/codestyle.xml/WhileLoopsMustUseBraces" deprecated="true" />
   <rule ref="category/apex/codestyle.xml/FieldNamingConventions" />
   <rule ref="category/apex/codestyle.xml/FormalParameterNamingConventions" />
   <rule ref="category/apex/codestyle.xml/LocalVariableNamingConventions" />
   <rule ref="category/apex/codestyle.xml/OneDeclarationPerLine" />
   <rule ref="category/apex/codestyle.xml/PropertyNamingConventions" />

   <!-- Error Prone -->
   <rule ref="category/apex/errorprone.xml/AvoidNonExistentAnnotations" />
   <rule ref="category/apex/errorprone.xml/AvoidDirectAccessTriggerMap" deprecated="true" />
   <rule ref="category/apex/errorprone.xml/AvoidHardcodingId" deprecated="true" />
   <rule ref="category/apex/errorprone.xml/MethodWithSameNameAsEnclosingClass" deprecated="true" />
   <rule ref="category/apex/errorprone.xml/EmptyCatchBlock" deprecated="true" />
   <rule ref="category/apex/errorprone.xml/EmptyIfStmt" deprecated="true" />
   <rule ref="category/apex/errorprone.xml/EmptyStatementBlock" deprecated="true" />
   <rule ref="category/apex/errorprone.xml/EmptyTryOrFinallyBlock" deprecated="true" />
   <rule ref="category/apex/errorprone.xml/EmptyWhileStmt" deprecated="true" />
   <rule ref="category/apex/errorprone.xml/TestMethodsMustBeInTestClasses" />

   <!-- Best Practices -->
   <rule ref="category/apex/bestpractices.xml/ApexUnitTestMethodShouldHaveIsTestAnnotation" />
   <rule ref="category/apex/bestpractices.xml/DebugsShouldUseLoggingLevel" />
   <rule ref="category/apex/bestpractices.xml/AvoidGlobalModifier" deprecated="true" />
   <rule ref="category/apex/bestpractices.xml/ApexUnitTestClassShouldHaveAsserts" deprecated="true" />
   <rule ref="category/apex/bestpractices.xml/ApexUnitTestShouldNotUseSeeAllDataTrue" deprecated="true" />
   <rule ref="category/apex/bestpractices.xml/UnusedLocalVariable" />

   <!-- VF -->
   <rule ref="category/vf/security.xml/VfCsrf" />
   <rule ref="category/vf/security.xml/VfUnescapeEl" />
</ruleset>
